!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("../lib/swig");"function"==typeof window.define&&"object"==typeof window.define.amd?window.define("swig",[],function(){return d}):window.swig=d},{"../lib/swig":9}],2:[function(a,b,c){var d=a("./utils"),e={full:["January","February","March","April","May","June","July","August","September","October","November","December"],abbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},f={full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],alt:{"-1":"Yesterday",0:"Today",1:"Tomorrow"}};c.tzOffset=0,c.DateZ=function(){var a={"default":["getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","toISOString","toGMTString","toUTCString","valueOf","getTime"],z:["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getYear","toDateString","toLocaleDateString","toLocaleTimeString"]},b=this;b.date=b.dateZ=arguments.length>1?new Date(Date.UTC.apply(Date,arguments)+6e4*(new Date).getTimezoneOffset()):1===arguments.length?new Date(new Date(arguments[0])):new Date,b.timezoneOffset=b.dateZ.getTimezoneOffset(),d.each(a.z,function(a){b[a]=function(){return b.dateZ[a]()}}),d.each(a["default"],function(a){b[a]=function(){return b.date[a]()}}),this.setTimezoneOffset(c.tzOffset)},c.DateZ.prototype={getTimezoneOffset:function(){return this.timezoneOffset},setTimezoneOffset:function(a){return this.timezoneOffset=a,this.dateZ=new Date(this.date.getTime()+6e4*this.date.getTimezoneOffset()-6e4*this.timezoneOffset),this}},c.d=function(a){return(a.getDate()<10?"0":"")+a.getDate()},c.D=function(a){return f.abbr[a.getDay()]},c.j=function(a){return a.getDate()},c.l=function(a){return f.full[a.getDay()]},c.N=function(a){var b=a.getDay();return b>=1?b:7},c.S=function(a){var b=a.getDate();return b%10===1&&11!==b?"st":b%10===2&&12!==b?"nd":b%10===3&&13!==b?"rd":"th"},c.w=function(a){return a.getDay()},c.z=function(a,b,d){var e=a.getFullYear(),f=new c.DateZ(e,a.getMonth(),a.getDate(),12,0,0),g=new c.DateZ(e,0,1,12,0,0);return f.setTimezoneOffset(b,d),g.setTimezoneOffset(b,d),Math.round((f-g)/864e5)},c.W=function(a){var b,c=new Date(a.valueOf()),d=(a.getDay()+6)%7;return c.setDate(c.getDate()-d+3),b=c.valueOf(),c.setMonth(0,1),4!==c.getDay()&&c.setMonth(0,1+(4-c.getDay()+7)%7),1+Math.ceil((b-c)/6048e5)},c.F=function(a){return e.full[a.getMonth()]},c.m=function(a){return(a.getMonth()<9?"0":"")+(a.getMonth()+1)},c.M=function(a){return e.abbr[a.getMonth()]},c.n=function(a){return a.getMonth()+1},c.t=function(a){return 32-new Date(a.getFullYear(),a.getMonth(),32).getDate()},c.L=function(a){return 29===new Date(a.getFullYear(),1,29).getDate()},c.o=function(a){var b=new Date(a.valueOf());return b.setDate(b.getDate()-(a.getDay()+6)%7+3),b.getFullYear()},c.Y=function(a){return a.getFullYear()},c.y=function(a){return a.getFullYear().toString().substr(2)},c.a=function(a){return a.getHours()<12?"am":"pm"},c.A=function(a){return a.getHours()<12?"AM":"PM"},c.B=function(a){var b,c=a.getUTCHours();return c=23===c?0:c+1,b=Math.abs((60*(60*c+a.getUTCMinutes())+a.getUTCSeconds())/86.4).toFixed(0),"000".concat(b).slice(b.length)},c.g=function(a){var b=a.getHours();return 0===b?12:b>12?b-12:b},c.G=function(a){return a.getHours()},c.h=function(a){var b=a.getHours();return(10>b||b>12&&22>b?"0":"")+(12>b?b:b-12)},c.H=function(a){var b=a.getHours();return(10>b?"0":"")+b},c.i=function(a){var b=a.getMinutes();return(10>b?"0":"")+b},c.s=function(a){var b=a.getSeconds();return(10>b?"0":"")+b},c.O=function(a){var b=a.getTimezoneOffset();return(0>b?"-":"+")+(10>b/60?"0":"")+Math.abs(b/60)+"00"},c.Z=function(a){return 60*a.getTimezoneOffset()},c.c=function(a){return a.toISOString()},c.r=function(a){return a.toUTCString()},c.U=function(a){return a.getTime()/1e3}},{"./utils":26}],3:[function(a,b,c){function d(a){var b=this,c={};return e.isArray(a)?e.map(a,function(a){return b.apply(null,arguments)}):"object"==typeof a?(e.each(a,function(a,d){c[d]=b.apply(null,arguments)}),c):void 0}var e=a("./utils"),f=a("./dateformatter");c.addslashes=function(a){var b=d.apply(c.addslashes,arguments);return void 0!==b?b:a.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"')},c.capitalize=function(a){var b=d.apply(c.capitalize,arguments);return void 0!==b?b:a.toString().charAt(0).toUpperCase()+a.toString().substr(1).toLowerCase()},c.date=function(a,b,c,d){var e,g=b.length,h=new f.DateZ(a),i=0,j="";for(c&&h.setTimezoneOffset(c,d),i;g>i;i+=1)e=b.charAt(i),"\\"===e?(i+=1,j+=g>i?b.charAt(i):e):j+=f.hasOwnProperty(e)?f[e](h,c,d):e;return j},c["default"]=function(a,b){return"undefined"==typeof a||!a&&"number"!=typeof a?b:a},c.escape=function(a,b){var e,f=d.apply(c.escape,arguments),g=a,h=0;if(void 0!==f)return f;if("string"!=typeof a)return a;switch(f="",b){case"js":for(g=g.replace(/\\/g,"\\u005C"),h;h<g.length;h+=1)e=g.charCodeAt(h),32>e?(e=e.toString(16).toUpperCase(),e=e.length<2?"0"+e:e,f+="\\u00"+e):f+=g[h];return f.replace(/&/g,"\\u0026").replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\'/g,"\\u0027").replace(/"/g,"\\u0022").replace(/\=/g,"\\u003D").replace(/-/g,"\\u002D").replace(/;/g,"\\u003B");default:return g.replace(/&(?!amp;|lt;|gt;|quot;|#39;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}},c.e=c.escape,c.first=function(a){if("object"==typeof a&&!e.isArray(a)){var b=e.keys(a);return a[b[0]]}return"string"==typeof a?a.substr(0,1):a[0]},c.groupBy=function(a,b){if(!e.isArray(a))return a;var c={};return e.each(a,function(a){if(a.hasOwnProperty(b)){var d=a[b];e.extend({},a);delete a[b],c[d]||(c[d]=[]),c[d].push(a)}}),c},c.join=function(a,b){if(e.isArray(a))return a.join(b);if("object"==typeof a){var c=[];return e.each(a,function(a){c.push(a)}),c.join(b)}return a},c.json=function(a,b){return JSON.stringify(a,null,b||0)},c.json_encode=c.json,c.last=function(a){if("object"==typeof a&&!e.isArray(a)){var b=e.keys(a);return a[b[b.length-1]]}return"string"==typeof a?a.charAt(a.length-1):a[a.length-1]},c.lower=function(a){var b=d.apply(c.lower,arguments);return void 0!==b?b:a.toString().toLowerCase()},c.raw=function(a){return c.safe(a)},c.raw.safe=!0,c.replace=function(a,b,c,d){var e=new RegExp(b,d);return a.replace(e,c)},c.reverse=function(a){return c.sort(a,!0)},c.safe=function(a){return a},c.safe.safe=!0,c.sort=function(a,b){var c;if(e.isArray(a))c=a.sort();else switch(typeof a){case"object":c=e.keys(a).sort();break;case"string":return c=a.split(""),b?c.reverse().join(""):c.sort().join("")}return c&&b?c.reverse():c||a},c.striptags=function(a){var b=d.apply(c.striptags,arguments);return void 0!==b?b:a.toString().replace(/(<([^>]+)>)/gi,"")},c.title=function(a){var b=d.apply(c.title,arguments);return void 0!==b?b:a.toString().replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},c.uniq=function(a){var b;return a&&e.isArray(a)?(b=[],e.each(a,function(a){-1===b.indexOf(a)&&b.push(a)}),b):""},c.upper=function(a){var b=d.apply(c.upper,arguments);return void 0!==b?b:a.toString().toUpperCase()},c.url_encode=function(a){var b=d.apply(c.url_encode,arguments);return void 0!==b?b:encodeURIComponent(a)},c.url_decode=function(a){var b=d.apply(c.url_decode,arguments);return void 0!==b?b:decodeURIComponent(a)}},{"./dateformatter":2,"./utils":26}],4:[function(a,b,c){function d(a){var b;return e.some(g,function(c){return e.some(c.regex,function(d){var e,f=a.match(d);if(f)return e=f[c.idx||0].replace(/\s*$/,""),e=c.hasOwnProperty("replace")&&c.replace.hasOwnProperty(e)?c.replace[e]:e,b={match:e,type:c.type,length:f[0].length},!0})}),b||(b={match:a,type:f.UNKNOWN,length:a.length}),b}var e=a("./utils"),f={WHITESPACE:0,STRING:1,FILTER:2,FILTEREMPTY:3,FUNCTION:4,FUNCTIONEMPTY:5,PARENOPEN:6,PARENCLOSE:7,COMMA:8,VAR:9,NUMBER:10,OPERATOR:11,BRACKETOPEN:12,BRACKETCLOSE:13,DOTKEY:14,ARRAYOPEN:15,CURLYOPEN:17,CURLYCLOSE:18,COLON:19,COMPARATOR:20,LOGIC:21,NOT:22,BOOL:23,ASSIGNMENT:24,METHODOPEN:25,UNKNOWN:100},g=[{type:f.WHITESPACE,regex:[/^\s+/]},{type:f.STRING,regex:[/^""/,/^".*?[^\\]"/,/^''/,/^'.*?[^\\]'/]},{type:f.FILTER,regex:[/^\|\s*(\w+)\(/],idx:1},{type:f.FILTEREMPTY,regex:[/^\|\s*(\w+)/],idx:1},{type:f.FUNCTIONEMPTY,regex:[/^\s*(\w+)\(\)/],idx:1},{type:f.FUNCTION,regex:[/^\s*(\w+)\(/],idx:1},{type:f.PARENOPEN,regex:[/^\(/]},{type:f.PARENCLOSE,regex:[/^\)/]},{type:f.COMMA,regex:[/^,/]},{type:f.LOGIC,regex:[/^(&&|\|\|)\s*/,/^(and|or)\s+/],idx:1,replace:{and:"&&",or:"||"}},{type:f.COMPARATOR,regex:[/^(===|==|\!==|\!=|<=|<|>=|>|in\s|gte\s|gt\s|lte\s|lt\s)\s*/],idx:1,replace:{gte:">=",gt:">",lte:"<=",lt:"<"}},{type:f.ASSIGNMENT,regex:[/^(=|\+=|-=|\*=|\/=)/]},{type:f.NOT,regex:[/^\!\s*/,/^not\s+/],replace:{not:"!"}},{type:f.BOOL,regex:[/^(true|false)\s+/,/^(true|false)$/],idx:1},{type:f.VAR,regex:[/^[a-zA-Z_$]\w*((\.\$?\w*)+)?/,/^[a-zA-Z_$]\w*/]},{type:f.BRACKETOPEN,regex:[/^\[/]},{type:f.BRACKETCLOSE,regex:[/^\]/]},{type:f.CURLYOPEN,regex:[/^\{/]},{type:f.COLON,regex:[/^\:/]},{type:f.CURLYCLOSE,regex:[/^\}/]},{type:f.DOTKEY,regex:[/^\.(\w+)/],idx:1},{type:f.NUMBER,regex:[/^[+\-]?\d+(\.\d+)?/]},{type:f.OPERATOR,regex:[/^(\+|\-|\/|\*|%)/]}];c.types=f,c.read=function(a){for(var b,c,e=0,f=[];e<a.length;)b=a.substring(e),c=d(b),e+=c.length,f.push(c);return f}},{"./utils":26}],5:[function(a,b,c){var d=a("__browserify_process"),e=a("fs"),f=a("path");b.exports=function(a,b){var c={};return b=b||"utf8",a=a?f.normalize(a):null,c.resolve=function(b,c){return c=a?a:c?f.dirname(c):d.cwd(),f.resolve(c,b)},c.load=function(a,d){if(!e||d&&!e.readFile||!e.readFileSync)throw new Error("Unable to find file "+a+" because there is no filesystem to read from.");return a=c.resolve(a),d?void e.readFile(a,b,d):e.readFileSync(a,b)},c}},{__browserify_process:31,fs:28,path:29}],6:[function(a,b,c){c.fs=a("./filesystem"),c.memory=a("./memory")},{"./filesystem":5,"./memory":7}],7:[function(a,b,c){var d=a("path"),e=a("../utils");b.exports=function(a,b){var c={};return b=b?d.normalize(b):null,c.resolve=function(a,c){return c=b?b:c?d.dirname(c):"/",d.resolve(c,a)},c.load=function(b,c){var d,f;return f=[b,b.replace(/^(\/|\\)/,"")],d=a[f[0]]||a[f[1]],d||e.throwError('Unable to find template "'+b+'".'),c?void c(null,d):d},c}},{"../utils":26,path:29}],8:[function(a,b,c){function d(a){return a.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}function e(a,b,c,d,e){this.out=[],this.state=[],this.filterApplyIdx=[],this._parsers={},this.line=d,this.filename=e,this.filters=b,this.escape=c,this.parse=function(){var b=this;return b._parsers.start&&b._parsers.start.call(b),f.each(a,function(c,d){var e=a[d-1];if(b.isLast=d===a.length-1,e)for(;e.type===h.WHITESPACE;)d-=1,e=a[d-1];b.prevToken=e,b.parseToken(c)}),b._parsers.end&&b._parsers.end.call(b),b.escape&&(b.filterApplyIdx=[0],"string"==typeof b.escape?(b.parseToken({type:h.FILTER,match:"e"}),b.parseToken({type:h.COMMA,match:","}),b.parseToken({type:h.STRING,match:String(c)}),b.parseToken({type:h.PARENCLOSE,match:")"})):b.parseToken({type:h.FILTEREMPTY,match:"e"})),b.out}}var f=a("./utils"),g=a("./lexer"),h=g.types,i=["break","case","catch","continue","debugger","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with"];e.prototype={on:function(a,b){this._parsers[a]=b},parseToken:function(a){var b,c=this,d=c._parsers[a.type]||c._parsers["*"],e=a.match,g=c.prevToken,i=g?g.type:null,j=c.state.length?c.state[c.state.length-1]:null;if(!d||"function"!=typeof d||d.call(this,a))switch(j&&g&&j===h.FILTER&&i===h.FILTER&&a.type!==h.PARENCLOSE&&a.type!==h.COMMA&&a.type!==h.OPERATOR&&a.type!==h.FILTER&&a.type!==h.FILTEREMPTY&&c.out.push(", "),j&&j===h.METHODOPEN&&(c.state.pop(),a.type!==h.PARENCLOSE&&c.out.push(", ")),a.type){case h.WHITESPACE:break;case h.STRING:c.filterApplyIdx.push(c.out.length),c.out.push(e.replace(/\\/g,"\\\\"));break;case h.NUMBER:case h.BOOL:c.filterApplyIdx.push(c.out.length),c.out.push(e);break;case h.FILTER:c.filters.hasOwnProperty(e)&&"function"==typeof c.filters[e]||f.throwError('Invalid filter "'+e+'"',c.line,c.filename),c.escape=c.filters[e].safe?!1:c.escape,c.out.splice(c.filterApplyIdx[c.filterApplyIdx.length-1],0,'_filters["'+e+'"]('),c.state.push(a.type);break;case h.FILTEREMPTY:c.filters.hasOwnProperty(e)&&"function"==typeof c.filters[e]||f.throwError('Invalid filter "'+e+'"',c.line,c.filename),c.escape=c.filters[e].safe?!1:c.escape,c.out.splice(c.filterApplyIdx[c.filterApplyIdx.length-1],0,'_filters["'+e+'"]('),c.out.push(")");break;case h.FUNCTION:case h.FUNCTIONEMPTY:c.out.push("((typeof _ctx."+e+' !== "undefined") ? _ctx.'+e+" : ((typeof "+e+' !== "undefined") ? '+e+" : _fn))("),c.escape=!1,a.type===h.FUNCTIONEMPTY?c.out[c.out.length-1]=c.out[c.out.length-1]+")":c.state.push(a.type),c.filterApplyIdx.push(c.out.length-1);break;case h.PARENOPEN:c.state.push(a.type),c.filterApplyIdx.length?(c.out.splice(c.filterApplyIdx[c.filterApplyIdx.length-1],0,"("),g&&i===h.VAR?(b=g.match.split(".").slice(0,-1),c.out.push(" || _fn).call("+c.checkMatch(b)),c.state.push(h.METHODOPEN),c.escape=!1):c.out.push(" || _fn)("),c.filterApplyIdx.push(c.out.length-3)):(c.out.push("("),c.filterApplyIdx.push(c.out.length-1));break;case h.PARENCLOSE:b=c.state.pop(),b!==h.PARENOPEN&&b!==h.FUNCTION&&b!==h.FILTER&&f.throwError("Mismatched nesting state",c.line,c.filename),c.out.push(")"),c.filterApplyIdx.pop(),b!==h.FILTER&&c.filterApplyIdx.pop();break;case h.COMMA:j!==h.FUNCTION&&j!==h.FILTER&&j!==h.ARRAYOPEN&&j!==h.CURLYOPEN&&j!==h.PARENOPEN&&j!==h.COLON&&f.throwError("Unexpected comma",c.line,c.filename),j===h.COLON&&c.state.pop(),c.out.push(", "),c.filterApplyIdx.pop();break;case h.LOGIC:case h.COMPARATOR:g&&i!==h.COMMA&&i!==a.type&&i!==h.BRACKETOPEN&&i!==h.CURLYOPEN&&i!==h.PARENOPEN&&i!==h.FUNCTION||f.throwError("Unexpected logic",c.line,c.filename),c.out.push(a.match);break;case h.NOT:c.out.push(a.match);break;case h.VAR:c.parseVar(a,e,j);break;case h.BRACKETOPEN:!g||i!==h.VAR&&i!==h.BRACKETCLOSE&&i!==h.PARENCLOSE?(c.state.push(h.ARRAYOPEN),c.filterApplyIdx.push(c.out.length)):c.state.push(a.type),c.out.push("[");break;case h.BRACKETCLOSE:b=c.state.pop(),b!==h.BRACKETOPEN&&b!==h.ARRAYOPEN&&f.throwError("Unexpected closing square bracket",c.line,c.filename),c.out.push("]"),c.filterApplyIdx.pop();break;case h.CURLYOPEN:c.state.push(a.type),c.out.push("{"),c.filterApplyIdx.push(c.out.length-1);break;case h.COLON:j!==h.CURLYOPEN&&f.throwError("Unexpected colon",c.line,c.filename),c.state.push(a.type),c.out.push(":"),c.filterApplyIdx.pop();break;case h.CURLYCLOSE:j===h.COLON&&c.state.pop(),c.state.pop()!==h.CURLYOPEN&&f.throwError("Unexpected closing curly brace",c.line,c.filename),c.out.push("}"),c.filterApplyIdx.pop();break;case h.DOTKEY:(!g||i!==h.VAR&&i!==h.BRACKETCLOSE&&i!==h.DOTKEY&&i!==h.PARENCLOSE&&i!==h.FUNCTIONEMPTY&&i!==h.FILTEREMPTY&&i!==h.CURLYCLOSE)&&f.throwError('Unexpected key "'+e+'"',c.line,c.filename),c.out.push("."+e);break;case h.OPERATOR:c.out.push(" "+e+" "),c.filterApplyIdx.pop()}},parseVar:function(a,b,c){var d=this;return b=b.split("."),-1!==i.indexOf(b[0])&&f.throwError('Reserved keyword "'+b[0]+'" attempted to be used as a variable',d.line,d.filename),d.filterApplyIdx.push(d.out.length),c===h.CURLYOPEN?(b.length>1&&f.throwError("Unexpected dot",d.line,d.filename),void d.out.push(b[0])):void d.out.push(d.checkMatch(b))},checkMatch:function(a){function b(b){var c=b+e,d=a,g="";return g="(typeof "+c+' !== "undefined" && '+c+" !== null",f.each(d,function(a,b){0!==b&&(g+=" && "+c+"."+a+" !== undefined && "+c+"."+a+" !== null",c+="."+a)}),g+=")"}function c(c){return"("+b(c)+" ? "+c+a.join(".")+' : "")'}var d,e=a[0];return d="("+b("_ctx.")+" ? "+c("_ctx.")+" : "+c("")+")","("+d+" !== null ? "+d+' : "" )'}},c.parse=function(a,b,i,j,k){function l(a,b){var c,d,h=g.read(f.strip(a));return c=new e(h,k,p,b,i.filename),d=c.parse().join(""),c.state.length&&f.throwError('Unable to parse "'+a+'"',b,i.filename),{compile:function(){return"_output += "+d+";\n"}}}function m(b,c){var d,l,m,n,o,q,r;if(f.startsWith(b,"end")){if(r=J[J.length-1],r&&r.name===b.split(/\s+/)[0].replace(/^end/,"")&&r.ends){switch(r.name){case"autoescape":p=i.autoescape;break;case"raw":N=!1}return void J.pop()}N||f.throwError('Unexpected end of tag "'+b.replace(/^end/,"")+'"',c,i.filename)}if(!N){switch(m=b.split(/\s+(.+)?/),n=m.shift(),j.hasOwnProperty(n)||f.throwError('Unexpected tag "'+b+'"',c,i.filename),d=g.read(f.strip(m.join(" "))),l=new e(d,k,!1,c,i.filename),o=j[n],o.parse(m[1],c,l,h,J,i,a)||f.throwError('Unexpected tag "'+n+'"',c,i.filename),l.parse(),q=l.out,n){case"autoescape":p="false"!==q[0]?q[0]:!1;break;case"raw":N=!0}return{block:!!j[n].block,compile:o.compile,args:q,content:[],ends:o.ends,name:n}}}function n(a){return"string"==typeof a&&(a=a.replace(/\s*$/,"")),a}b=b.replace(/\r\n/g,"\n");var o,p=i.autoescape,q=i.tagControls[0],r=i.tagControls[1],s=i.varControls[0],t=i.varControls[1],u=d(q),v=d(r),w=d(s),x=d(t),y=new RegExp("^"+u+"-?\\s*-?|-?\\s*-?"+v+"$","g"),z=new RegExp("^"+u+"-"),A=new RegExp("-"+v+"$"),B=new RegExp("^"+w+"-?\\s*-?|-?\\s*-?"+x+"$","g"),C=new RegExp("^"+w+"-"),D=new RegExp("-"+x+"$"),E=i.cmtControls[0],F=i.cmtControls[1],G="[\\s\\S]*?",H=new RegExp("("+u+G+v+"|"+w+G+x+"|"+d(E)+G+d(F)+")"),I=1,J=[],K=null,L=[],M={},N=!1;return c.parseVariable=l,f.each(b.split(H),function(a){var b,c,d,e,g;if(a){if(!N&&f.startsWith(a,s)&&f.endsWith(a,t))d=C.test(a),o=D.test(a),b=l(a.replace(B,""),I);else if(f.startsWith(a,q)&&f.endsWith(a,r))d=z.test(a),o=A.test(a),b=m(a.replace(y,""),I),b&&("extends"===b.name?K=b.args.join("").replace(/^\'|\'$/g,"").replace(/^\"|\"$/g,""):b.block&&!J.length&&(M[b.args.join("")]=b)),N&&!b&&(b=a);else if(N||!f.startsWith(a,E)&&!f.endsWith(a,F))b=o?a.replace(/^\s*/,""):a,o=!1;else if(f.startsWith(a,E)&&f.endsWith(a,F))return;d&&L.length&&(e=L.pop(),"string"==typeof e?e=n(e):e.content&&e.content.length&&(g=n(e.content.pop()),e.content.push(g)),L.push(e)),b&&(J.length?J[J.length-1].content.push(b):L.push(b),b.name&&b.ends&&J.push(b),c=a.match(/\n/g),I+=c?c.length:0)}}),{name:i.filename,parent:K,tokens:L,blocks:M}},c.compile=function(a,b,d,e){var g="",h=f.isArray(a)?a:a.tokens;return f.each(h,function(a){var f;return"string"==typeof a?void(g+='_output += "'+a.replace(/\\/g,"\\\\").replace(/\n|\r/g,"\\n").replace(/"/g,'\\"')+'";\n'):(f=a.compile(c.compile,a.args?a.args.slice(0):[],a.content?a.content.slice(0):[],b,d,e),void(g+=f||""))}),g}},{"./lexer":4,"./utils":26}],9:[function(a,b,c){function d(){return""}function e(a){if(a){if(f.each(["varControls","tagControls","cmtControls"],function(b){if(a.hasOwnProperty(b)){if(!f.isArray(a[b])||2!==a[b].length)throw new Error('Option "'+b+'" must be an array containing 2 different control strings.');if(a[b][0]===a[b][1])throw new Error('Option "'+b+'" open and close controls must not be the same.');f.each(a[b],function(a,c){if(a.length<2)throw new Error('Option "'+b+'" '+(c?"open ":"close ")+'control must be at least 2 characters. Saw "'+a+'" instead.')})}}),a.hasOwnProperty("cache")&&a.cache&&"memory"!==a.cache&&(!a.cache.get||!a.cache.set))throw new Error("Invalid cache option "+JSON.stringify(a.cache)+' found. Expected "memory" or { get: function (key) { ... }, set: function (key, value) { ... } }.');if(a.hasOwnProperty("loader")&&a.loader&&(!a.loader.load||!a.loader.resolve))throw new Error("Invalid loader option "+JSON.stringify(a.loader)+" found. Expected { load: function (pathname, cb) { ... }, resolve: function (to, from) { ... } }.")}}var f=a("./utils"),g=a("./tags"),h=a("./filters"),i=a("./parser"),j=a("./dateformatter"),k=a("./loaders");c.version="1.4.2";var l,m={autoescape:!0,varControls:["{{","}}"],tagControls:["{%","%}"],cmtControls:["{#","#}"],locals:{},cache:"memory",loader:k.fs()};c.setDefaults=function(a){e(a),l.options=f.extend(l.options,a)},c.setDefaultTZOffset=function(a){j.tzOffset=a},c.Swig=function(a){function b(a){return a&&a.locals?f.extend({},p.options.locals,a.locals):p.options.locals}function c(a){return a=a||{},a.hasOwnProperty("cache")&&!a.cache||!p.options.cache}function j(a,b){return c(b)?void 0:"memory"===p.options.cache?p.cache[a]:p.options.cache.get(a)}function k(a,b,d){return c(b)?void 0:"memory"===p.options.cache?void(p.cache[a]=d):void p.options.cache.set(a,d)}function l(a,b){return f.map(b,function(b){var c=b.args?b.args.join(""):"";return"block"===b.name&&a[c]&&(b=a[c]),b.content&&b.content.length&&(b.content=l(a,b.content)),b})}function n(a,b){var c=[];f.each(a,function(a){c.push(a)}),f.each(c.reverse(),function(a){"block"!==a.name&&b.unshift(a)})}function o(a,b){for(var c,d,e,g=a.parent,h=[],i=[];g;){if(!b||!b.filename)throw new Error('Cannot extend "'+g+'" because current template has no filename.');if(c=c||b.filename,c=p.options.loader.resolve(g,c),d=j(c,b)||p.parseFile(c,f.extend({},b,{filename:c})),g=d.parent,-1!==h.indexOf(c))throw new Error('Illegal circular extends of "'+c+'".');h.push(c),i.push(d)}for(e=i.length,e=i.length-2;e>=0;e-=1)i[e].tokens=l(i[e].blocks,i[e+1].tokens),n(i[e].blocks,i[e].tokens);return i}e(a),this.options=f.extend({},m,a||{}),this.cache={},this.extensions={};var p=this,q=g,r=h;this.invalidateCache=function(){"memory"===p.options.cache&&(p.cache={})},this.setFilter=function(a,b){if("function"!=typeof b)throw new Error('Filter "'+a+'" is not a valid function.');r[a]=b},this.setTag=function(a,b,c,d,e){if("function"!=typeof b)throw new Error('Tag "'+a+'" parse method is not a valid function.');if("function"!=typeof c)throw new Error('Tag "'+a+'" compile method is not a valid function.');q[a]={parse:b,compile:c,ends:d||!1,block:!!e}},this.setExtension=function(a,b){p.extensions[a]=b},this.parse=function(a,c){e(c);var d,g=b(c),h={};for(d in c)c.hasOwnProperty(d)&&"locals"!==d&&(h[d]=c[d]);return c=f.extend({},p.options,h),c.locals=g,i.parse(this,a,c,q,r)},this.parseFile=function(a,b){var c;return b||(b={}),a=p.options.loader.resolve(a,b.resolveFrom),c=p.options.loader.load(a),b.filename||(b=f.extend({filename:a},b)),p.parse(c,b)},this.precompile=function(a,b){var c,d=p.parse(a,b),e=o(d,b);e.length&&(d.tokens=l(d.blocks,e[0].tokens),n(d.blocks,d.tokens));try{c=new Function("_swig","_ctx","_filters","_utils","_fn",'  var _ext = _swig.extensions,\n    _output = "";\n'+i.compile(d,e,b)+"\n  return _output;\n")}catch(g){f.throwError(g,null,b.filename)}return{tpl:c,tokens:d}},this.render=function(a,b){return p.compile(a,b)()},this.renderFile=function(a,b,c){return c?void p.compileFile(a,{},function(a,d){var e;if(a)return void c(a);try{e=d(b)}catch(f){return void c(f)}c(null,e)}):p.compileFile(a)(b)},this.compile=function(a,c){function e(a){var b;return b=a&&h?f.extend({},g,a):a&&!h?a:!a&&h?g:{},i.tpl(p,b,r,f,d)}var g,h,i,l=c?c.filename:null,m=l?j(l,c):null;return m?m:(g=b(c),h=f.keys(g).length,i=this.precompile(a,c),f.extend(e,i.tokens),l&&k(l,c,e),e)},this.compileFile=function(a,b,c){var d,e;return b||(b={}),a=p.options.loader.resolve(a,b.resolveFrom),b.filename||(b=f.extend({filename:a},b)),(e=j(a,b))?c?void c(null,e):e:c?void p.options.loader.load(a,function(a,d){if(a)return void c(a);var e;try{e=p.compile(d,b)}catch(f){return void c(f)}c(a,e)}):(d=p.options.loader.load(a),p.compile(d,b))},this.run=function(a,c,e){var g=b({locals:c});return e&&k(e,{},a),a(p,g,r,f,d)}},l=new c.Swig,c.setFilter=l.setFilter,c.setTag=l.setTag,c.setExtension=l.setExtension,c.parseFile=l.parseFile,c.precompile=l.precompile,c.compile=l.compile,c.compileFile=l.compileFile,c.render=l.render,c.renderFile=l.renderFile,c.run=l.run,c.invalidateCache=l.invalidateCache,c.loaders=k},{"./dateformatter":2,"./filters":3,"./loaders":6,"./parser":8,"./tags":20,"./utils":26}],10:[function(a,b,c){var d=a("../utils"),e=["html","js"];c.compile=function(a,b,c,d,e,f){return a(c,d,e,f)},c.parse=function(a,b,c,f,g,h){var i;return c.on("*",function(a){return i||a.type!==f.BOOL&&(a.type!==f.STRING||-1!==e.indexOf(a.match))?void d.throwError('Unexpected token "'+a.match+'" in autoescape tag',b,h.filename):(this.out.push(a.match),void(i=!0))}),!0},c.ends=!0},{"../utils":26}],11:[function(a,b,c){c.compile=function(a,b,c,d,e){return a(c,d,e,b.join(""))},c.parse=function(a,b,c){return c.on("*",function(a){this.out.push(a.match)}),!0},c.ends=!0,c.block=!0},{}],12:[function(a,b,c){c.compile=function(){return"} else {\n"},c.parse=function(a,b,c,d,e){return c.on("*",function(a){throw new Error('"else" tag does not accept any tokens. Found "'+a.match+'" on line '+b+".")}),e.length&&"if"===e[e.length-1].name}},{}],13:[function(a,b,c){var d=a("./if").parse;c.compile=function(a,b){return"} else if ("+b.join(" ")+") {\n"},c.parse=function(a,b,c,e,f){var g=d(a,b,c,e,f);return g&&f.length&&"if"===f[f.length-1].name}},{"./if":17}],14:[function(a,b,c){c.compile=function(){},c.parse=function(){return!0},c.ends=!1},{}],15:[function(a,b,c){var d=a("../filters");c.compile=function(a,b,c,d,e,f){var g=b.shift().replace(/\($/,""),h='(function () {\n  var _output = "";\n'+a(c,d,e,f)+"  return _output;\n})()";return")"===b[b.length-1]&&b.pop(),b=b.length?", "+b.join(""):"",'_output += _filters["'+g+'"]('+h+b+");\n"},c.parse=function(a,b,c,e){function f(a){if(!d.hasOwnProperty(a))throw new Error('Filter "'+a+'" does not exist on line '+b+".")}var g;return c.on(e.FUNCTION,function(a){return g?!0:(g=a.match.replace(/\($/,""),f(g),this.out.push(a.match),void this.state.push(a.type))}),c.on(e.VAR,function(a){return g?!0:(g=a.match,f(g),void this.out.push(g))}),!0},c.ends=!0},{"../filters":3}],16:[function(a,b,c){var d="_ctx.",e=d+"loop";c.compile=function(a,b,c,f,g,h){var i,j=b.shift(),k="__k",l=(d+"__loopcache"+Math.random()).replace(/\./g,"");return b[0]&&","===b[0]&&(b.shift(),k=j,j=b.shift()),i=b.join(""),["(function () {\n","  var __l = "+i+', __len = (_utils.isArray(__l) || typeof __l === "string") ? __l.length : _utils.keys(__l).length;\n',"  if (!__l) { return; }\n","    var "+l+" = { loop: "+e+", "+j+": "+d+j+", "+k+": "+d+k+" };\n","    "+e+" = { first: false, index: 1, index0: 0, revindex: __len, revindex0: __len - 1, length: __len, last: false };\n","  _utils.each(__l, function ("+j+", "+k+") {\n","    "+d+j+" = "+j+";\n","    "+d+k+" = "+k+";\n","    "+e+".key = "+k+";\n","    "+e+".first = ("+e+".index0 === 0);\n","    "+e+".last = ("+e+".revindex0 === 0);\n","    "+a(c,f,g,h),"    "+e+".index += 1; "+e+".index0 += 1; "+e+".revindex -= 1; "+e+".revindex0 -= 1;\n","  });\n","  "+e+" = "+l+".loop;\n","  "+d+j+" = "+l+"."+j+";\n","  "+d+k+" = "+l+"."+k+";\n","  "+l+" = undefined;\n","})();\n"].join("")},c.parse=function(a,b,c,d){var e,f;return c.on(d.NUMBER,function(a){var c=this.state.length?this.state[this.state.length-1]:null;if(!f||c!==d.ARRAYOPEN&&c!==d.CURLYOPEN&&c!==d.CURLYCLOSE&&c!==d.FUNCTION&&c!==d.FILTER)throw new Error('Unexpected number "'+a.match+'" on line '+b+".");return!0}),c.on(d.VAR,function(a){return f&&e?!0:(this.out.length||(e=!0),void this.out.push(a.match))}),c.on(d.COMMA,function(a){return e&&this.prevToken.type===d.VAR?void this.out.push(a.match):!0}),c.on(d.COMPARATOR,function(a){if("in"!==a.match||!e)throw new Error('Unexpected token "'+a.match+'" on line '+b+".");f=!0,this.filterApplyIdx.push(this.out.length)}),!0},c.ends=!0},{}],17:[function(a,b,c){c.compile=function(a,b,c,d,e,f){return"if ("+b.join(" ")+") { \n"+a(c,d,e,f)+"\n}"},c.parse=function(a,b,c,d){if("undefined"==typeof a)throw new Error("No conditional statement provided on line "+b+".");return c.on(d.COMPARATOR,function(a){if(this.isLast)throw new Error('Unexpected logic "'+a.match+'" on line '+b+".");if(this.prevToken.type===d.NOT)throw new Error('Attempted logic "not '+a.match+'" on line '+b+". Use !(foo "+a.match+") instead.");this.out.push(a.match),this.filterApplyIdx.push(this.out.length)}),c.on(d.NOT,function(a){if(this.isLast)throw new Error('Unexpected logic "'+a.match+'" on line '+b+".");this.out.push(a.match)}),c.on(d.BOOL,function(a){this.out.push(a.match)}),c.on(d.LOGIC,function(a){if(!this.out.length||this.isLast)throw new Error('Unexpected logic "'+a.match+'" on line '+b+".");this.out.push(a.match),this.filterApplyIdx.pop()}),!0},c.ends=!0},{}],18:[function(a,b,c){var d=a("../utils");c.compile=function(a,b){var c=b.pop(),e="_ctx."+c+' = {};\n  var _output = "";\n',f=d.map(b,function(a){return{ex:new RegExp("_ctx."+a.name,"g"),re:"_ctx."+c+"."+a.name}});return d.each(b,function(a){var b=a.compiled;d.each(f,function(a){b=b.replace(a.ex,a.re)}),e+=b}),e},c.parse=function(b,c,e,f,g,h,i){var j,k,l=a("../parser").compile,m={resolveFrom:h.filename},n=d.extend({},h,m);return e.on(f.STRING,function(a){var b=this;if(!j)return j=i.parseFile(a.match.replace(/^("|')|("|')$/g,""),m).tokens,void d.each(j,function(a){var c,d="";a&&"macro"===a.name&&a.compile&&(c=a.args[0],d+=a.compile(l,a.args,a.content,[],n)+"\n",b.out.push({compiled:d,name:c}))});throw new Error("Unexpected string "+a.match+" on line "+c+".")}),e.on(f.VAR,function(a){var b=this;if(!j||k)throw new Error('Unexpected variable "'+a.match+'" on line '+c+".");if("as"!==a.match)return k=a.match,b.out.push(k),!1}),!0},c.block=!0},{"../parser":8,"../utils":26}],19:[function(a,b,c){var d="ignore",e="missing",f="only";c.compile=function(a,b){var c=b.shift(),d=b.indexOf(f),g=-1!==d?b.splice(d,1):!1,h=(b.pop()||"").replace(/\\/g,"\\\\"),i=b[b.length-1]===e?b.pop():!1,j=b.join("");return(i?"  try {\n":"")+"_output += _swig.compileFile("+c+', {resolveFrom: "'+h+'"})('+(g&&j?j:j?"_utils.extend({}, _ctx, "+j+")":"_ctx")+");\n"+(i?"} catch (e) {}\n":"")},c.parse=function(a,b,c,g,h,i){var j,k;return c.on(g.STRING,function(a){return j?!0:(j=a.match,void this.out.push(j))}),c.on(g.VAR,function(a){if(!j)return j=a.match,!0;if(!k&&"with"===a.match)return void(k=!0);if(k&&a.match===f&&"with"!==this.prevToken.match)return void this.out.push(a.match);if(a.match===d)return!1;if(a.match===e){if(this.prevToken.match!==d)throw new Error('Unexpected token "'+e+'" on line '+b+".");return this.out.push(a.match),!1}if(this.prevToken.match===d)throw new Error('Expected "'+e+'" on line '+b+' but found "'+a.match+'".');return!0}),c.on("end",function(){this.out.push(i.filename||null)}),!0}},{}],20:[function(a,b,c){c.autoescape=a("./autoescape"),c.block=a("./block"),c["else"]=a("./else"),c.elseif=a("./elseif"),c.elif=c.elseif,c["extends"]=a("./extends"),c.filter=a("./filter"),c["for"]=a("./for"),c["if"]=a("./if"),c["import"]=a("./import"),c.include=a("./include"),c.macro=a("./macro"),c.parent=a("./parent"),c.raw=a("./raw"),c.set=a("./set"),c.spaceless=a("./spaceless")},{"./autoescape":10,"./block":11,"./else":12,"./elseif":13,"./extends":14,"./filter":15,"./for":16,"./if":17,"./import":18,"./include":19,"./macro":21,"./parent":22,"./raw":23,"./set":24,"./spaceless":25}],21:[function(a,b,c){c.compile=function(a,b,c,d,e,f){var g=b.shift();return"_ctx."+g+" = function ("+b.join("")+') {\n  var _output = "",\n    __ctx = _utils.extend({}, _ctx);\n  _utils.each(_ctx, function (v, k) {\n    if (["'+b.join('","')+'"].indexOf(k) !== -1) { delete _ctx[k]; }\n  });\n'+a(c,d,e,f)+"\n _ctx = _utils.extend(_ctx, __ctx);\n  return _output;\n};\n_ctx."+g+".safe = true;\n"},c.parse=function(a,b,c,d){var e;return c.on(d.VAR,function(a){if(-1!==a.match.indexOf("."))throw new Error('Unexpected dot in macro argument "'+a.match+'" on line '+b+".");this.out.push(a.match)}),c.on(d.FUNCTION,function(a){e||(e=a.match,this.out.push(e),this.state.push(d.FUNCTION))}),c.on(d.FUNCTIONEMPTY,function(a){e||(e=a.match,this.out.push(e))}),c.on(d.PARENCLOSE,function(){if(!this.isLast)throw new Error("Unexpected parenthesis close on line "+b+".");
}),c.on(d.COMMA,function(){return!0}),c.on("*",function(){}),!0},c.ends=!0,c.block=!0},{}],22:[function(a,b,c){c.compile=function(a,b,c,d,e,f){if(!d||!d.length)return"";var g,h,i=b[0],j=!0,k=d.length,l=0;for(l;k>l;l+=1)if(g=d[l],g.blocks&&g.blocks.hasOwnProperty(f)&&j&&i!==g.name)return h=g.blocks[f],h.compile(a,[f],h.content,d.slice(l+1),e)+"\n"},c.parse=function(a,b,c,d,e,f){return c.on("*",function(a){throw new Error('Unexpected argument "'+a.match+'" on line '+b+".")}),c.on("end",function(){this.out.push(f.filename)}),!0}},{}],23:[function(a,b,c){c.compile=function(a,b,c,d,e,f){return a(c,d,e,f)},c.parse=function(a,b,c){return c.on("*",function(a){throw new Error('Unexpected token "'+a.match+'" in raw tag on line '+b+".")}),!0},c.ends=!0},{}],24:[function(a,b,c){c.compile=function(a,b){return b.join(" ")+";\n"},c.parse=function(a,b,c,d){var e,f="";return c.on(d.VAR,function(a){return e?void(e+="_ctx."+a.match):c.out.length?!0:void(f+=a.match)}),c.on(d.BRACKETOPEN,function(a){return e||this.out.length?!0:void(e=a.match)}),c.on(d.STRING,function(a){return e&&!this.out.length?void(e+=a.match):!0}),c.on(d.BRACKETCLOSE,function(a){return e&&!this.out.length?(f+=e+a.match,void(e=void 0)):!0}),c.on(d.DOTKEY,function(a){return e||f?void(f+="."+a.match):!0}),c.on(d.ASSIGNMENT,function(a){if(this.out.length||!f)throw new Error('Unexpected assignment "'+a.match+'" on line '+b+".");this.out.push("_ctx."+f),this.out.push(a.match),this.filterApplyIdx.push(this.out.length)}),!0},c.block=!0},{}],25:[function(a,b,c){var d=a("../utils");c.compile=function(a,b,c,e,f,g){function h(a){return d.map(a,function(a){return a.content||"string"!=typeof a?(a.content=h(a.content),a):a.replace(/^\s+/,"").replace(/>\s+</g,"><").replace(/\s+$/,"")})}return a(h(c),e,f,g)},c.parse=function(a,b,c){return c.on("*",function(a){throw new Error('Unexpected token "'+a.match+'" on line '+b+".")}),!0},c.ends=!0},{"../utils":26}],26:[function(a,b,c){var d;c.strip=function(a){return a.replace(/^\s+|\s+$/g,"")},c.startsWith=function(a,b){return 0===a.indexOf(b)},c.endsWith=function(a,b){return-1!==a.indexOf(b,a.length-b.length)},c.each=function(a,b){var c,e;if(d(a))for(c=0,e=a.length,c;e>c&&b(a[c],c,a)!==!1;c+=1);else for(c in a)if(a.hasOwnProperty(c)&&b(a[c],c,a)===!1)break;return a},c.isArray=d=Array.hasOwnProperty("isArray")?Array.isArray:function(a){return a?"object"==typeof a&&-1!==Object.prototype.toString.call(a).indexOf():!1},c.some=function(a,b){var e,f,g=0;if(d(a))for(f=a.length,g;f>g&&!(e=b(a[g],g,a));g+=1);else c.each(a,function(c,d){return e=b(c,d,a),!e});return!!e},c.map=function(a,b){var c,e=0,f=[];if(d(a))for(c=a.length,e;c>e;e+=1)f[e]=b(a[e],e);else for(e in a)a.hasOwnProperty(e)&&(f[e]=b(a[e],e));return f},c.extend=function(){var a,b,c=arguments,d=c[0],e=c.length>1?Array.prototype.slice.call(c,1):[],f=0,g=e.length;for(f;g>f;f+=1){b=e[f]||{};for(a in b)b.hasOwnProperty(a)&&(d[a]=b[a])}return d},c.keys=function(a){return a?Object.keys?Object.keys(a):c.map(a,function(a,b){return b}):[]},c.throwError=function(a,b,c){throw b&&(a+=" on line "+b),c&&(a+=" in file "+c),new Error(a+".")}},{}],27:[function(a,b,c){function d(a){return"[object Array]"===j.call(a)}function e(a,b){var c;if(null===a)c={__proto__:null};else{if("object"!=typeof a)throw new TypeError("typeof prototype["+typeof a+"] != 'object'");var d=function(){};d.prototype=a,c=new d,c.__proto__=a}return"undefined"!=typeof b&&Object.defineProperties&&Object.defineProperties(c,b),c}function f(a){return"object"!=typeof a&&"function"!=typeof a||null===a}function g(a){if(f(a))throw new TypeError("Object.keys called on a non-object");var b=[];for(var c in a)k.call(a,c)&&b.push(c);return b}function h(a){if(f(a))throw new TypeError("Object.getOwnPropertyNames called on a non-object");var b=g(a);return c.isArray(a)&&-1===c.indexOf(a,"length")&&b.push("length"),b}function i(a,b){return{value:a[b]}}var j=Object.prototype.toString,k=Object.prototype.hasOwnProperty;c.isArray="function"==typeof Array.isArray?Array.isArray:d,c.indexOf=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1},c.filter=function(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c},c.forEach=function(a,b,c){if(a.forEach)return a.forEach(b,c);for(var d=0;d<a.length;d++)b.call(c,a[d],d,a)},c.map=function(a,b){if(a.map)return a.map(b);for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=b(a[d],d,a);return c},c.reduce=function(a,b,c){if(a.reduce)return a.reduce(b,c);var d,e=!1;2<arguments.length&&(d=c,e=!0);for(var f=0,g=a.length;g>f;++f)a.hasOwnProperty(f)&&(e?d=b(d,a[f],f,a):(d=a[f],e=!0));return d},"b"!=="ab".substr(-1)?c.substr=function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}:c.substr=function(a,b,c){return a.substr(b,c)},c.trim=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},c.bind=function(){var a=Array.prototype.slice.call(arguments),b=a.shift();if(b.bind)return b.bind.apply(b,a);var c=a.shift();return function(){b.apply(c,a.concat([Array.prototype.slice.call(arguments)]))}},c.create="function"==typeof Object.create?Object.create:e;var l="function"==typeof Object.keys?Object.keys:g,m="function"==typeof Object.getOwnPropertyNames?Object.getOwnPropertyNames:h;if((new Error).hasOwnProperty("description")){var n=function(a,b){return"[object Error]"===j.call(a)&&(b=c.filter(b,function(a){return"description"!==a&&"number"!==a&&"message"!==a})),b};c.keys=function(a){return n(a,l(a))},c.getOwnPropertyNames=function(a){return n(a,m(a))}}else c.keys=l,c.getOwnPropertyNames=m;if("function"==typeof Object.getOwnPropertyDescriptor)try{Object.getOwnPropertyDescriptor({a:1},"a"),c.getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor}catch(o){c.getOwnPropertyDescriptor=function(a,b){try{return Object.getOwnPropertyDescriptor(a,b)}catch(c){return i(a,b)}}}else c.getOwnPropertyDescriptor=i},{}],28:[function(a,b,c){},{}],29:[function(a,b,c){function d(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}var e=a("__browserify_process"),f=a("util"),g=a("_shims"),h=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(a){return h.exec(a).slice(1)};c.resolve=function(){for(var a="",b=!1,c=arguments.length-1;c>=-1&&!b;c--){var h=c>=0?arguments[c]:e.cwd();if(!f.isString(h))throw new TypeError("Arguments to path.resolve must be strings");h&&(a=h+"/"+a,b="/"===h.charAt(0))}return a=d(g.filter(a.split("/"),function(a){return!!a}),!b).join("/"),(b?"/":"")+a||"."},c.normalize=function(a){var b=c.isAbsolute(a),e="/"===g.substr(a,-1);return a=d(g.filter(a.split("/"),function(a){return!!a}),!b).join("/"),a||b||(a="."),a&&e&&(a+="/"),(b?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(g.filter(a,function(a,b){if(!f.isString(a))throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=i(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=i(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return i(a)[3]}},{__browserify_process:31,_shims:27,util:30}],30:[function(a,b,c){function d(a,b){var d={seen:[],stylize:f};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),o(b)?d.showHidden=b:b&&c._extend(d,b),u(d.showHidden)&&(d.showHidden=!1),u(d.depth)&&(d.depth=2),u(d.colors)&&(d.colors=!1),u(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=e),h(d,a,d.depth)}function e(a,b){var c=d.styles[b];return c?"["+d.colors[c][0]+"m"+a+"["+d.colors[c][1]+"m":a}function f(a,b){return a}function g(a){var b={};return G.forEach(a,function(a,c){b[a]=!0}),b}function h(a,b,d){if(a.customInspect&&b&&z(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d);return s(e)||(e=h(a,e,d)),e}var f=i(a,b);if(f)return f;var o=G.keys(b),p=g(o);if(a.showHidden&&(o=G.getOwnPropertyNames(b)),0===o.length){if(z(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(v(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(x(b))return a.stylize(Date.prototype.toString.call(b),"date");if(y(b))return j(b)}var r="",t=!1,u=["{","}"];if(n(b)&&(t=!0,u=["[","]"]),z(b)){var w=b.name?": "+b.name:"";r=" [Function"+w+"]"}if(v(b)&&(r=" "+RegExp.prototype.toString.call(b)),x(b)&&(r=" "+Date.prototype.toUTCString.call(b)),y(b)&&(r=" "+j(b)),0===o.length&&(!t||0==b.length))return u[0]+r+u[1];if(0>d)return v(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var A;return A=t?k(a,b,d,p,o):o.map(function(c){return l(a,b,d,p,c,t)}),a.seen.pop(),m(A,r,u)}function i(a,b){if(u(b))return a.stylize("undefined","undefined");if(s(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return r(b)?a.stylize(""+b,"number"):o(b)?a.stylize(""+b,"boolean"):p(b)?a.stylize("null","null"):void 0}function j(a){return"["+Error.prototype.toString.call(a)+"]"}function k(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(l(a,b,c,d,String(g),!0)):f.push("");return G.forEach(e,function(e){e.match(/^\d+$/)||f.push(l(a,b,c,d,e,!0))}),f}function l(a,b,c,d,e,f){var g,i,j;if(j=G.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?i=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(i=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),i||(G.indexOf(a.seen,j.value)<0?(i=p(c)?h(a,j.value,null):h(a,j.value,c-1),i.indexOf("\n")>-1&&(i=f?i.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+i.split("\n").map(function(a){return"   "+a}).join("\n"))):i=a.stylize("[Circular]","special")),u(g)){if(f&&e.match(/^\d+$/))return i;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+i}function m(a,b,c){var d=0,e=G.reduce(a,function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function n(a){return G.isArray(a)}function o(a){return"boolean"==typeof a}function p(a){return null===a}function q(a){return null==a}function r(a){return"number"==typeof a}function s(a){return"string"==typeof a}function t(a){return"symbol"==typeof a}function u(a){return void 0===a}function v(a){return w(a)&&"[object RegExp]"===C(a)}function w(a){return"object"==typeof a&&a}function x(a){return w(a)&&"[object Date]"===C(a)}function y(a){return w(a)&&"[object Error]"===C(a)}function z(a){return"function"==typeof a}function A(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function B(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.binarySlice}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),I[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=a("_shims"),H=/%[sdj%]/g;c.format=function(a){if(!s(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(d(arguments[c]));return b.join(" ")}for(var c=1,e=arguments,f=e.length,g=String(a).replace(H,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(e[c++]);case"%d":return Number(e[c++]);case"%j":try{return JSON.stringify(e[c++])}catch(b){return"[Circular]"}default:return a}}),h=e[c];f>c;h=e[++c])g+=p(h)||!w(h)?" "+h:" "+d(h);return g},c.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=n,c.isBoolean=o,c.isNull=p,c.isNullOrUndefined=q,c.isNumber=r,c.isString=s,c.isSymbol=t,c.isUndefined=u,c.isRegExp=v,c.isObject=w,c.isDate=x,c.isError=y,c.isFunction=z,c.isPrimitive=A,c.isBuffer=B;var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=function(a,b){a.super_=b,a.prototype=G.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},c._extend=function(a,b){if(!b||!w(b))return a;for(var c=G.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}},{_shims:27}],31:[function(a,b,c){var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.binding=function(a){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(a){throw new Error("process.chdir is not supported")}},{}]},{},[1]),function(a,b,c){function d(c,d,e){"boolean"==typeof c&&(e=c,c=void 0),c&&(c.loader=a.swig.loaders.memory(b),i=new a.swig.Swig(c)),e===!1&&(j={}),d&&d.length&&_.each(d,function(a){a(i)})}function e(a){var b=/\{%\s?(?:extends|import|include)\s?["'](.+?)['"].*%\}/g,c=/['"](?:.{1,2}\/)*(.+?)['"]/,d=a.match(b),e=d&&d.map(function(a){var b,d=a.match(c);return d&&(b=d[1]),b}).filter(function(a){return a});return e}function f(a){var c=j[a];return c||(c=b[a],_.each(e(c),f),j[a]=i.precompile(c,{filename:a})),j[a]}function g(a,e,g){var h=j[a]||b[a];return i||d({},g,null),!h&&console&&console.error?console.error("template not found: ",a):h&&"function"!=typeof h.tpl&&(h=f(a)),h=h&&i.run(h.tpl,e)||"",_.reduce(c,function(a,b){return b(a,l)},h)}function h(a,b,c,e,f){return f=f||{},f=JSON.stringify(f),c=c.replace(/"/g,"&quot;").replace(/'/g,"&#39;"),f=f.replace(/'/g,"&#39;"),i||d({},[function(a){l.tmpl.i18n(a).init(e||{})}],null),i.render('{{ "'+a+'"|i18n("'+b+'", "'+c+'", '+f+") }}")}var i,j={},k={render:g,init:d,translate:h,getTemplates:function(){return j}},l=a.OFFSET||{};l.tmpl=k,a.OFFSET=l}(this,{"partials/v2/search/offset-exclusive-tooltip.html":'<span class="icon offset-exclusive js_tooltip_exclusive {{ classes }}" data-toggle="tooltip" data-container="body" data-placement="right" title="{% i18n OFFSET_EXCLUSIVE_TOOLTIP %}Images that are only available on Offset{% endi18n %}">?</span>\n',"partials/v2/search/offset-exclusive-tag.html":'<div class="offset-exclusive tag">\n  <span>{% i18n OFFSET_EXCLUSIVE_IMAGE %}EXCLUSIVE IMAGE{% endi18n %}</span>\n  {% if tooltip %}{% include "../../../partials/v2/search/offset-exclusive-tooltip.html" with {classes: classes} %}{% endif %}\n</div>\n',"macros/v2/photo.html":'{% macro image(asset, src, link) %}\n  {% if asset.original.width > asset.original.height %}\n    {% set orientation = "landscape" %}\n  {% else %}\n    {% set orientation = "portrait" %}\n  {% endif %}\n  {% if link %}\n    <a href="{{ asset.relative_url }}">\n      <img {% if orientation === \'landscape\' %}class="landscape"{% endif %} src="{{ src }}" alt="{{ asset.description }}" data-asset="{{ asset._id }}" data-asset-friendly-id="{{ asset.friendly_id}}" data-asset-photographer="{{ asset.photographer }}" itemprop="contentUrl" />\n    </a>\n  {% else %}\n    <img {% if orientation === \'landscape\' %}class="landscape"{% endif %} src="{{ src }}" alt="{{ asset.description }}" data-asset="{{ asset._id }}" data-asset-friendly-id="{{ asset.friendly_id }}" data-asset-photographer="{{ asset.photographer }}" itemprop="contentUrl" />\n  {% endif %}\n{% endmacro %}\n\n{% macro title(photo, linkTruncated) %}\n<h2 class="js_photo-description h5 mtn mbl offset-elipses">\n  <span class="js_description-text"\n    data-description="{{photo.description}}"\n    data-expand-description="{{ expandDescription }}"\n    itemprop="name">{{ photo.description }}</span>\n  {% if linkTruncated %}\n\n  <a href="{{ photo.relative_url }}?expand=description"\n    class="text-no-wrap"> [ + ] </a>\n  {% else %}\n  <a href="#"\n    class="js_expand-description text-no-wrap hide"> [ + ] </a>\n  <a href="#"\n    class="js_collapse-description text-no-wrap hide"> [ - ] </a>\n  {% endif %}\n</h2>\n{% endmacro %}\n\n{% macro meta(photo, linkId, useDarkText) %}\n  {% if useDarkText %}\n    {% set textClass = "" %}\n  {% else %}\n    {% set textClass = "text-bright" %}\n  {% endif %}\n\n  <ul class="list-unstyled mbn">\n    <li>\n      {% if linkId %}\n        <span class="{{textClass}}">{% i18n ID_UCASE %}<span data-definition="as in identifier">ID</span>{% endi18n %}: <span><a href="{{ photo.relative_url }}" data-track="click.photoSideBar.linkImage">{{ photo.friendly_id }}</a>\n      {% else %}\n        <span class="{{textClass}}">{% i18n ID_UCASE %}<span data-definition="as in identifier">ID</span>{% endi18n %}: {{ photo.friendly_id }}</span>\n      {% endif %}\n    </li>\n    <li class="mbm {{textClass}}">\n      {% if photo.agency %}\n        {% if photo.photographer %}\n          <span>{{ photo.photographer }}</span>&nbsp;/\n        {% endif %}\n        <a href="/agency/{{ photo.agency_qs }}"\n          class="offset-prevent-wrap"\n          itemprop="author"\n          data-track=\'click.imageSideBar.photoAgency.{"photoAgency":"{{photo.agency_qs}}"}\'>\n          {{ photo.agency }}\n        </a>\n      {% else %}\n        <a href="/artist/{{ photo.photographer_qs }}"\n          data-track=\'click.imageSideBar.photographer.{"photographer":"{{photo.photographer_qs}}"}\'\n          itemprop="author">\n          {{ photo.photographer }}\n        </a>\n      {% endif %}\n    </li>\n    {% if photo.editorial %}\n      <li class="js_editorial-note editorial-note text-small {{textClass}}" title="{% i18n EDITORIAL_USE_CUSTOMER_MESSAGING %}Editorial Use Only. For promotional or other commercial usage, we may be able to assist. Please contact: editorialsales@shutterstock.com {% endi18n %}">\n        {% i18n EDITORIAL_USE_ONLY %}Editorial use only{% endi18n %} <i class="icon-question-sign icon-white"></i>\n      </li>\n    {% endif %}\n    {% if photo.model_released %}\n      <li class="text-small {{textClass}}">\n        {% i18n MODEL_RELEASE_ON_FILE %}Model release on file{% endi18n %}\n      </li>\n    {% endif %}\n    <li class="text-small">\n      <a href="/licensing-terms" target="_blank" data-track="click.imageSideBar.licensingTerms">\n        {% i18n LICENSING_TERMS %}Licensing terms{% endi18n %}\n      </a>\n    </li>\n  </ul>\n{% endmacro %}\n\n{% macro addToCartButton(photo, license) %}\n  <button class="js_add-to-cart btn btn-primary btn-large btn-block pan mbl"\n    data-asset="{{ photo._id || photo.id }}"\n    data-id="{{ photo.friendly_id }}"\n    data-track="click.image.addToCart">\n    <span class="icon icon-cart mrm"></span>\n    {% if license %}\n      {% i18n BUY_ANOTHER_LICENSE %}Buy another license{% endi18n %}\n    {% else %}\n      {% i18n ADD_TO_CART %}Add to cart{% endi18n %}\n    {% endif %}\n</button>\n{% endmacro %}\n\n{% macro addedToCartButton() %}\n  <button class="js_add-to-cart-success btn btn-success btn-large btn-block pan mbl hide" disabled>\n    <span class="icon icon-ok mts mrs"></span>{% i18n ADDED_TO_CART %}Added to cart{% endi18n %}\n  </button>\n{% endmacro %}\n\n{% macro downloadToCartButton(photo, cartId, licence) %}\n  <a target="_blank"\n    href="/photo/download/{{ photo._id || photo.id }}?cart_id={{ cartId }}"\n    class="btn btn-inverse btn-large btn-block mbl"\n    style="white-space: normal; height: auto;line-height: 18px; padding: 13px 0;"\n    data-track=\'click.photoCart.reDownload.{"photoId":"{{photo._id}}"}\'>\n    {% if licence == "LARGE" %}\n      {% i18n RE_DOWNLOAD_LARGE %}Re-download large{% endi18n %}\n    {% elseif licence == "SMALL" %}\n      {% i18n RE_DOWNLOAD_SMALL %}Re-download small{% endi18n %}\n    {% else %}\n      {% i18n RE_DOWNLOAD %}Re-download{% endi18n %}\n    {% endif %}\n  </a>\n{% endmacro %}\n\n{% macro addToCart(photo, prices, license, hideBuyOut, useDarkText) %}\n  {% if useDarkText %}\n    {% set textClass = "" %}\n  {% else %}\n    {% set textClass = "text-bright" %}\n  {% endif %}\n  <ul class="js_license-type nav nav-tabs license-toggle mbx {% if hideBuyOut %}hide{% endif %}">\n    <li class="active text-center mbn">\n      <a href="#license"\n        class="text-xs text-uppercase man"\n        data-track=\'click.photoLicenseToggle.license.{"photoId":"{{photo.friendly_id}}"}\'>{% i18n LICENSE %}License{% endi18n %}</a>\n    </li>\n    <li class="text-center mbn">\n      <a href="#exclusive"\n        class="text-xs text-uppercase man"\n        data-track=\'click.photoLicenseToggle.buyOut.{"photoId":"{{photo.friendly_id}}"}\'>{% i18n BUY_OUT %}<span data-definition="buy-out as in license exclusively">Buy-Out</span>{% endi18n %}</a>\n    </li>\n  </ul>\n  <div class="tab-content">\n    <div class="tab-pane active" id="license">\n      {% if license %}\n        <div class="js_has-license">\n\n          {% if license.hasBothLicense %}\n            <p class="man {{textClass}}">{% i18n HAS_BOTH_LICENSES %}This image has been licensed in both sizes. Re-download at no additional cost.{% endi18n %}</p>\n          {% elseif license.LARGE %}\n            <p class="man {{textClass}}">{% i18n HAS_LARGE_LICENSE %}This image has been licensed in large size. Re-download at no additional cost.{% endi18n %}</p>\n          {% else %}\n            <p class="man {{textClass}}">{% i18n HAS_SMALL_LICENSE %}This image has been licensed in small size. Re-download at no additional cost.{% endi18n %}</p>\n          {% endif %}\n          <p>\n            <a href="#"\n              class="js_need-another-license"\n              data-track="click.photoLicenseToggle.needAnother">{% i18n NEED_ANOTHER_LICENSE %}Need another license?{% endi18n %}</a>\n          </p>\n\n          {% if license.LARGE && is_premier %}\n            {{ downloadToCartButton(photo, license.LARGE, "LARGE") }}\n          {% endif %}\n\n          {% if license.SMALL && is_premier %}\n            {{ downloadToCartButton(photo, license.SMALL, "SMALL") }}\n          {% endif %}\n        </div>\n      {% endif %}\n      <div class="js_show-add-to-cart {% if license %}hide{% endif %}">\n        <form action="" class="js_add-to-cart-form form-horizontal mbl pll">\n          {% set largeDisabled = user.isPremierPrepaid && user.premierPrepaid.size == "SMALL" %}\n          {% set smallDisabled = user.isPremierPrepaid && user.premierPrepaid.size == "LARGE" %}\n          <label class="radio block{% if largeDisabled %} disabled{% endif %}">\n            <input type="radio" name="size" value="LARGE"{% if !largeDisabled %} checked="checked"{% endif %}{% if largeDisabled %} disabled="disabled"{% endif %}/>\n            <strong class="text-large {{textClass}} pls">{{ prices.large_image_license }}</strong>\n            <span class="text-small text-lighter">\n                {{ photo.original.width }} x {{ photo.original.height }}{% i18n PX_COMMA %}<span data-definition="px as in pixels">px,</span>{% endi18n %}\n                {{ photo.original.dpi }}{% i18n DPI %}<span data-definition="dpi as in dots per inch">dpi</span>{% endi18n %}\n            </span>\n          </label>\n\n          <label class="radio block{% if smallDisabled %} disabled{% endif %}">\n            <input type="radio" name="size" value="SMALL"{% if largeDisabled %} checked="checked"{% endif %}{% if smallDisabled %} disabled="disabled"{% endif %} />\n            <strong class="text-large {{textClass}} pls">{{ prices.small_image_license }}</strong>\n            <span class="text-small text-lighter">\n              {{ photo.display.width }} x {{ photo.display.height }}{% i18n PX_COMMA %}<span data-definition="px as in pixels">px,</span>{% endi18n %}\n              {{ photo.display.dpi }}{% i18n DPI %}<span data-definition="dpi as in dots per inch">dpi</span>{% endi18n %}\n            </span>\n          </label>\n        </form>\n\n        <div class="js_add-to-cart-large-block {% if largeDisabled %}hide{% endif %}">\n          {% if license.LARGE %}\n            {{ addToCartButton(photo, license.LARGE) }}\n            {{ addedToCartButton() }}\n            {{ downloadToCartButton(photo, license.LARGE) }}\n          {% else %}\n            {{ addToCartButton(photo) }}\n            {{ addedToCartButton() }}\n          {% endif %}\n        </div>\n\n        <div class="js_add-to-cart-small-block {% if !largeDisabled %}hide{% endif %}">\n          {% if license.SMALL %}\n            {{ addToCartButton(photo, license.SMALL) }}\n            {{ addedToCartButton() }}\n            {{ downloadToCartButton(photo, license.SMALL) }}\n          {% else %}\n            {{ addToCartButton(photo) }}\n            {{ addedToCartButton() }}\n          {% endif %}\n        </div>\n      </div>\n    </div>\n    <div class="tab-pane" id="exclusive">\n      <p class="{{textClass}} text-small mbx pbm">\n        {% i18n THIS_IMAGE_MAY_EXCLUSIVE %}This image may be available to license for exclusive use. Please contact us for pricing.{% endi18n %}\n      </p>\n      <button class="js_request-quote btn btn-primary btn-block btn-large"\n        data-track=\'click.photoSidebar.requestQuote.{"photoId":"{{photo._id}}"}\'>\n        {% i18n REQUEST_QUOTE %}<span data-definition="quote as in price quote">Request quote</span>{% endi18n %}\n      </button>\n    </div>\n  </div>\n{% endmacro %}\n\n{% macro exclusiveModal(photo, thumb, user) %}\n  <div class="js_exclusive-modal exclusive-modal modal fade hide modal-offset" tabindex="-1" role="dialog" aria-hidden="true">\n    <div class="modal-dialog modal-lg rect ui-light pvx" role="document" style="overflow: hidden;">\n      <a class="modal-close" data-dismiss="modal" aria-hidden="true">close</a>\n      <div class="row">\n        <div class="col-xs-10 col-xs-offset-1 column-center mbx">\n          <form class="man" name="exclusive-form" method="POST" action="/contact">\n            <h2 class="h1 text-center">\n              {% i18n REQUEST_TO_LICENSE_EXCLUSIVELY %}Request to license exclusively.{% endi18n %}\n            </h2>\n            <p class="text-center">\n              {% i18n THIS_IMAGE_MAY_EXCLUSIVE_BRIEF %}This image may be licensed for exclusive use. Please provide a brief<br />description of your project and we\'ll get back to you shortly.{% endi18n %}\n            </p>\n            <p class="errors-list text-error text-center mbn pts mbl"></p>\n            <div class="row">\n              <div class="col-xs-12 col-sm-4">\n                {% if user.isPremier %}\n                  <img src="{{ thumb|replace(\'medium\', \'medium_premier\') }}" width="100%" class="pbs">\n                {% else %}\n                  <img src="{{ thumb }}" width="100%" class="pbs">\n                {% endif %}\n                <p>\n                  {% i18n ID_UCASE %}<span data-definition="as in identifier">ID</span>{% endi18n %}: {{ photo.friendly_id }}\n                </p>\n              </div>\n              <div class="col-xs-12 col-sm-8">\n                <div class="row">\n                  <div class="form-group col-xs-12">\n                    <input type="text" class="form-control" placeholder="{% i18n NAME %}Name{% endi18n %}" value="{% if user.fullname != \'Guest Guest\' %}{{ user.fullname }}{% endif %}" name="name" data-validation="required">\n                  </div>\n\n                  <div class="form-group col-xs-12">\n                    <input type="email" class="form-control" placeholder="{% i18n EMAIL %}Email{% endi18n %}" value="{{ user.email }}" name="email" maxlength=80 data-validation="required email">\n                  </div>\n\n                  <div class="form-group col-xs-12">\n                    <input type="tel" class="form-control" placeholder="{% i18n PHONE_OPTIONAL %}Phone (optional){% endi18n %}" name="phone" maxlength=40>\n                  </div>\n\n                  <div class="form-group col-xs-12">\n                      <textarea class="form-control" placeholder="{% i18n BRIEF_DESCRIPTION_OF_PROJECT %}Brief description of your project{% endi18n %}" rows="3" name="message" data-validation="required" style="resize: none;"></textarea>\n                  </div>\n\n                  <div class="text-center col-xs-12">\n                    <input type="hidden" value="{{ _csrf }}" name="_csrf">\n                    <input type="hidden" value="{{ photo.friendly_id }}" name="photo-id">\n                    <div id="exclusive-captcha-container" ></div>\n\n                    <button id=\'exclusive-submit-form\'\n                      type="submit"\n                      class="btn btn-primary btn-large btn-block mbl"\n                      data-track=\'click.exclusiveForm.submitRequest.{"photoId":"{{photo.friendly_id}}"}\'>{% i18n SUBMIT_YOUR_REQUEST %}<span data-definition="as in submit your request to license image exclusively">Submit your request{% endi18n %}</span>\n                    </button>\n\n                    <p class="text-bright text-center mtl" id="liveagent_button_online_573a0000000LIEe_exclusive">\n                      <span class="icon-launch-chat icon mrs"></span><a href="javascript://Chat" class="js-launch-chat text-dark">{% i18n CHAT_LIVE_WITH_SALES %}Chat live with a sales rep{% endi18n %}</a>\n                    </p>\n\n                    <div id="liveagent_button_offline_573a0000000LIEe_exclusive" style="display: none;">\n                      <!-- Offline Chat Content -->\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </form>\n          <div class="js_exclusive-modal-success hide text-center mbx">\n            <h2 class="h1">\n              {% i18n THANK_YOU_PERIOD %}Thank you.{% endi18n %}\n            </h2>\n            <p class="mbx">\n              {% i18n RECEIVED_REQUEST_LICENSE %}We received your request to exclusively license this image.{% endi18n %}\n              <br />\n              {% i18n WILL_REACH_OUT_DISCUSS %}We will reach out to you shortly to discuss the details.{% endi18n %}\n            </p>\n            <button class="btn btn-primary btn-large mbs"\n              data-dismiss="modal"\n              aria-hidden="true"\n              data-track=\'click.exclusiveForm.continue.{"photoId":"{{photo.friendly_id}}"}\'>{% i18n CONTINUE_TO_EXPLORE_OFFSET %}Continue to explore Offset{% endi18n %}</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n{% endmacro %}\n\n{% macro addToSet(photo) %}\n<a href="#"\n  class="js_add-to-set btn btn-link text-bright text-small phn pbn mrx"\n  data-media-id="{{ photo.friendly_id }}"\n  data-track=\'click.image.addToSet.{"photoId":"{{photo.friendly_id}}"}\'>\n  <i class="icon-white icon-star mrm"></i>{% i18n SAVE %}<span data-definition="as in save to set">Save</span>{% endi18n %}\n</a>\n{% endmacro %}\n\n{% macro downloadComp(photo) %}\n<a href="/photo/comp/{{ photo.id }}"\n  class="js_download-comp download-comp btn btn-block btn-ghost btn-large phn pbn pls mtl {% if photo.hasOwnProperty(\'status\') && photo.status !== \'active\' %}hide{% endif %}"\n  target="_blank"\n  data-media-id="{{ photo.friendly_id }}"\n  data-track=\'click.image.downloadComp.{"photoId":"{{photo.friendly_id}}"}\'>\n  <i class="icon-white icon-comp mrm"></i>{% i18n DOWNLOAD_COMP %}<span data-definition="comp as in download comprehensive">Download comp</span>{% endi18n %}\n</a>\n{% endmacro %}\n\n{% macro share(id) %}\n<a href="#"\n  class="js_share btn btn-link text-bright text-small phn pbn mlx"\n  data-id="{{ id }}"\n  data-track=\'click.image.share.{"photoId":"{{photo.friendly_id}}"}\'>\n  <i class="icon-white icon-share-alt mrm"></i>{% i18n SHARE %}Share{% endi18n %}\n</a>\n{% endmacro %}\n\n{% macro keywords(keywords, limit, viewAllLink) %}\n<div class="mbm text-small tag-cloud" itemprop="keywords">\n  {% for keyword in photo.keywords %}\n  <a href="/search/{{ keyword + \'\' | replace(\' \', \'+\', \'g\') }}"\n    class="text-muted{% if loop.index > limit %} hide{% endif %}"\n    data-track="click.keywords.keyword">\n    {{ keyword }}{% if !loop.last %},{% endif -%}\n  </a>\n  {% endfor %}\n</div>\n{% if photo.keywords.length > limit %}\n{% if !viewAllLink %}\n  {% set viewAllLink = \'#\' %}\n{% endif %}\n<a href="{{ viewAllLink }}"\n  class="js_toggle-asset-keywords text-small"\n  data-toggle-close-label="{% i18n CLOSE %}Close{% endi18n %}"\n  data-expand-keywords="{{ expandKeywords }}"\n  data-track="click.keywords.viewAll">\n  {% i18n VIEW_ALL %}<span data-definition="as in view all results">View all</span>{% endi18n %}\n</a>\n{% endif %}\n{% endmacro %}\n\n{% macro discoveryPaths(photo) %}\n{% if photo.same_shoot %}\n<div class="js_discovery-path discovery-path mod-asset mod-asset-related" data-path="same-shoot">\n  <div class="hide" data-carousel-container>\n    <h4 class="text-small mbm">{% i18n SAME_SHOOT %}<span data-definition="shoot as in photoshoot">Same shoot</span>{% endi18n %}<span data-carousel-view-all data-carousel-view-all-disabled class="hide"></span>\n    </h4>\n    <div class="offset-carousel"\n      data-carousel="/same-shoot?contributor_id={{ photo.contributor_id }}&name={{ photo.same_shoot|url_encode }}&excluded_ids[]={{ photo.friendly_id }}"\n      data-carousel-limit="50"\n      data-carousel-identifier="same-shoot"\n      data-track=\'click.photo.sameShootCarousel\'>\n      <div data-carousel-slide class="clearfix">\n        <a class="hide">\n          {% i18n VIEW_ALL %}<span data-definition="as in view all results">View all</span>{% endi18n %}\n        </a>\n      </div>\n      <a data-carousel-control="prev" class="hide">{% i18n PREVIOUS %}<span data-definition="previous as in previous set of results">Previous</span>{% endi18n %}</a>\n      <a data-carousel-control="next" class="hide">{% i18n NEXT %}<span data-definition="next as in next set of results">Next</span>{% endi18n %}</a>\n    </div>\n  </div>\n</div>\n{% endif %}\n\n{# Visually similar (below) is NOT the same thing as similar, despite them both having the same title. We prever visually similar to similar. #}\n<div class="js_discovery-path discovery-path mod-asset mod-asset-related" data-path="visually-similar">\n  <div class="hide" data-carousel-container>\n    <h4 class="text-small mbm">{% i18n SIMILAR_IMAGES %}Similar images{% endi18n %}</h4>\n    <div class="offset-carousel"\n      data-carousel="/visually-similar/{{ photo.friendly_id }}"\n      data-carousel-limit="50"\n      data-carousel-identifier="visually-similar"\n      data-track=\'click.photo.visuallySimilarCarousel\'>\n      <div data-carousel-slide class="clearfix">\n        <a class="hide">\n          {% i18n VIEW_ALL %}<span data-definition="as in view all results">View all</span>{% endi18n %}\n        </a>\n      </div>\n      <a data-carousel-control="prev" class="hide">{% i18n PREVIOUS %}<span data-definition="previous as in previous set of results">Previous</span>{% endi18n %}</a>\n      <a data-carousel-control="next" class="hide">{% i18n NEXT %}<span data-definition="next as in next set of results">Next</span>{% endi18n %}</a>\n    </div>\n  </div>\n</div>\n\n<div class="js_discovery-path discovery-path mod-asset mod-asset-related" data-path="similar">\n  <div class="hide" data-carousel-container>\n    <h4 class="text-small mbm">{% i18n SIMILAR_IMAGES %}Similar images{% endi18n %}<span data-carousel-view-all  data-carousel-view-all-disabled class="hide"></span>\n    </h4>\n    <div class="offset-carousel"\n      data-carousel="/similar/{{ photo.friendly_id }}"\n      data-carousel-limit="50"\n      data-carousel-identifier="similar"\n      data-track=\'click.photo.similarImagesCarousel\'>\n      <div data-carousel-slide class="clearfix">\n        <a class="hide">\n          {% i18n VIEW_ALL %}<span data-definition="as in view all results">View all</span>{% endi18n %}\n        </a>\n      </div>\n      <a data-carousel-control="prev" class="hide">{% i18n PREVIOUS %}<span data-definition="previous as in previous set of results">Previous</span>{% endi18n %}</a>\n      <a data-carousel-control="next" class="hide">{% i18n NEXT %}<span data-definition="next as in next set of results">Next</span>{% endi18n %}</a>\n    </div>\n  </div>\n</div>\n\n{% if photo.agency %}\n  {% set baseUrl = user.locale.urlPrefix + "/agency/" %}\n  {% set encodedMoreFromArtistOrAgency = photo.agency_qs %}\n  {% set moreFromArtistOrAgencyTitle = photo.agency %}\n{% else %}\n  {% set baseUrl = user.locale.urlPrefix + "/artist/" %}\n  {% set encodedMoreFromArtistOrAgency = photo.photographer_qs %}\n  {% set moreFromArtistOrAgencyTitle = photo.photographer %}\n{% endif %}\n\n<div class="js_discovery-path discovery-path mod-asset mod-asset-related" data-path="contributor">\n  <div class="hide" data-carousel-container>\n    <h4 class="text-small mbm">{% i18n MORE_FROM_ARTIST __artist__:moreFromArtistOrAgencyTitle %}More from __artist__{% endi18n %}<span data-carousel-view-all class="hide">&nbsp;&nbsp;|&nbsp;\n        <a href="{{baseUrl}}{{encodedMoreFromArtistOrAgency}}">\n          {% i18n VIEW_ALL %}<span data-definition="as in view all results">View all</span>{% endi18n %}\n        </a>\n      </span>\n    </h4>\n    <div class="offset-carousel"\n      data-carousel="{{baseUrl}}{{encodedMoreFromArtistOrAgency}}"\n      data-carousel-limit="50"\n      data-carousel-identifier="contributor"\n      data-track=\'click.photo.moreFromArtistCarousel\'>\n      <div data-carousel-slide class="clearfix">\n        <a data-carousel-view-all href="{{baseUrl}}{{encodedMoreFromArtistOrAgency}}" class="hide">\n          {% i18n VIEW_ALL %}<span data-definition="as in view all results">View all</span>{% endi18n %}\n        </a>\n      </div>\n      <a data-carousel-control="prev" class="hide">{% i18n PREVIOUS %}<span data-definition="previous as in previous set of results">Previous</span>{% endi18n %}</a>\n      <a data-carousel-control="next" class="hide">{% i18n NEXT %}<span data-definition="next as in next set of results">Next</span>{% endi18n %}</a>\n    </div>\n  </div>\n</div>\n{% endmacro %}\n',
"partials/v2/add-to-cart.html":'{% import \'../../macros/v2/photo.html\' as Photo %}\n{% set origin = window.location.protocol + \'//\' + window.location.hostname %}\n\n<div class="js_modal-add-to-cart modal modal-offset fade hide" tabindex="-1" role="dialog" aria-hidden="true">\n	<div class="modal-dialog modal-lg rect ui-light pvx" role="document">\n		<a class="modal-close" data-dismiss="modal" aria-hidden="true">{% i18n CLOSE_LCASE %}<span data-definition="close as in close modal">close</span>{% endi18n %}</a>\n		<div class="col-md-12 column-center">\n			<div class="row">\n				<div class="col-xs-12 col-md-7 md-plx">\n					<div class="mod-asset mod-asset-image ui-medium">\n						<img src="{{ media.src }}" alt="{{ media.description }}"  />\n					</div>\n				</div>\n				<div class="col-xs-10 col-xs-offset-1 col-md-offset-0 col-md-5 md-prx">\n					<div class="mod-asset mod-asset-details pan mtl md-mtn">\n						<div class="asset-meta">\n							{{ Photo.title(media, media.descriptionTruncated) }}\n							{{ Photo.meta(media, true, true) }}\n						</div>\n						<div class="asset-add-to-cart">\n							{{ Photo.addToCart(media, formattedPricing, license, true, true) }}\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n',"partials/v2/add-to-set.html":'<div class="js_sets-manage sets-manage ui-medium-light">\n  <div class="row">\n    <div class="col-xs-12">\n      <div class="js_sets-manage-add{% if !sets %} hide{% endif %} pal">\n        <h5 class="mtn mbm">{% i18n ADD_TO_A_SET %}Add to a set{% endi18n %}</h5>\n        <form class="mbn">\n          <div>\n            {% if loading %}\n              <select class="form-control" name="set" disabled>\n            {% else %}\n              <select class="form-control" name="set">\n            {% endif %}\n              {% for set in sets %}\n                <option value="{{ set.id }}">{{ set.name }}</option>\n              {% endfor %}\n            </select>\n            <p>\n              <a href=""\n                class="text-small js_sets-manage-toggle-view"\n                data-track="click.manageSets.createNew">{% i18n CREATE_A_NEW_SET %}Create a new set{% endi18n %}</a>\n            </p>\n          </div>\n          <div class="mtl">\n            <button type="submit"\n              class="btn btn-primary text-small"\n              data-track="click.manageSets.createSave">{% i18n SAVE %}<span data-definition="as in save to set">Save</span>{% endi18n %}</button>\n            <button class="js_sets-manage-cancel btn btn-link text-small"\n              data-track="click.manageSets.createCancel">{% i18n CANCEL %}Cancel{% endi18n %}</button>\n          </div>\n        </form>\n      </div>\n      <div class="js_sets-manage-create{% if sets %} hide{% endif %} pal">\n        <h5 class="mtn mbm">{% i18n CREATE_A_NEW_SET %}Create a new set{% endi18n %}</h5>\n        <form class="mbn">\n          <div class="pbx mbs">\n            {% if loading %}\n            <input class="form-control" name="name" type="text" placeholder="{% i18n ENTER_SET_NAME %}Enter the name of the set...{% endi18n %}" disabled="disabled" value="loading..." />\n            {% else %}\n            <input class="form-control" name="name" type="text" placeholder="{% i18n ENTER_SET_NAME %}Enter the name of the set...{% endi18n %}" />\n            {% endif %}\n          </div>\n          <div class="ptm">\n            <button\n              type="submit"\n              class="btn text-small btn-primary"\n              data-track="click.manageSets.save">{% i18n SAVE %}<span data-definition="as in save to set">Save</span>{% endi18n %}</button>\n            {% if sets %}\n            <button\n              data-track="click.manageSets.cancel"\n              class="btn btn-link text-small js_sets-manage-toggle-view">{% i18n CANCEL %}Cancel{% endi18n %}</button>\n            {% else %}\n            <button\n              data-track="click.manageSets.cancel"\n              class="btn btn-link text-small js_sets-manage-cancel">{% i18n CANCEL %}Cancel{% endi18n %}</button>\n            {% endif %}\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n',"partials/v2/mosaic.html":'{% import \'../../macros/v2/photo.html\' as Photo %}\n\n{% spaceless %}\n{% for media in mosaicList %}\n<div class="js_search-result result" data-media-id="{{ media.id }}">\n  <a class="js_search-result-pic result-pic"\n    href="{{ media.media.relative_url }}"\n    title="{{ media.media.description }}"\n    data-track=\'click.mosaic.clickImage.{"mediaId":"{{media.id}}"}\'>\n    <div class="result-tag">\n      {%if media.media.offset_exclusive %}\n        {% include "../../partials/v2/search/offset-exclusive-tag.html" %}\n      {% endif %}\n    </div>\n\n    <span class="hide">{{media.media.description}}</span>\n\n    {% if user.isPremier %}\n      <img src="{{ media.src|replace(\'medium\', \'medium_premier\') }}"\n        width="{{ media.width }}"\n        height="{{ media.height }}"\n        style="height:{{ media.height }}px; width:{{ media.width }}px;"\n        alt="{{media.media.description}}"/>\n    {% else %}\n      <img src="{{ media.src }}"\n        width="{{ media.width }}"\n        height="{{ media.height }}"\n        style="height:{{ media.height }}px; width:{{ media.width }}px;"\n        alt="{{media.media.description}}"/>\n    {% endif %}\n  </a>\n\n  {% if media.showActions %}\n  {% if visualDiscovery.active %}\n  <div class="js_visual-discovery-trigger js_pjax-trigger visual-discovery-trigger text-upper text-xs ui-screen-medium">\n    <a href="?discovery={{ media.id }}"\n      class="text-bright unstyled"\n      data-track="click.mosaic.visualDiscoveryNew">\n      <span class="text-highlight text-strong">{% i18n NEW %}New{% endi18n %}</span>\n      {% i18n MORE_LIKE_THIS %}<span data-definition="as in more like this image">More like this</span>{% endi18n %}\n    </a>\n  </div>\n  {% endif %}\n\n  {% if user.isPremier %}\n  <div class="result-actions panel-blur hide pvx"\n    style="background-image: url({{ media.src|replace(\'medium\', \'medium_premier\') }});">\n  </div>\n  {% else %}\n  <div class="result-actions panel-blur hide pvx"\n    style="background-image: url({{ media.src }});">\n  </div>\n  {% endif %}\n\n  <div class="result-actions ui-screen-medium pvm hide text-center">\n    {%if media.media.offset_exclusive %}\n      {% include "../../partials/v2/search/offset-exclusive-tag.html" %}\n    {% endif %}\n    {% if media.showDeleteBtn %}\n    <a href="#"\n      class="js_remove-from-set set-remove"\n      data-track=\'click.mosaic.removeFromSet.{"mediaId":"{{media.id}}"}\'>\n      {% i18n REMOVE_FROM_SET %}<span data-definition="set as in a collection">Remove from set</span>{% endi18n %}\n    </a>\n    {% endif %}\n\n    {% if media.showSaveSetsBtn %}\n    <a href="#"\n      class="js_add-to-set set-add"\n      data-track=\'click.mosaic.addToSet.{"mediaId":"{{media.id}}"}\'>\n      {% i18n ADD_TO_SET %}<span data-definition="set as in a collection">Add to set</span>{% endi18n %}\n    </a>\n    {% endif %}\n\n    <!-- TODO: convert this to a button -->\n    {% if !isLicensingDisabledFlag %}\n    <a href="#"\n      class="js_add-to-cart-modal cart-add mrn"\n      data-track="click.mosaic.addToCart">\n      {% i18n ADD_TO_CART %}Add to cart{% endi18n %}\n    </a>\n    {% endif %}\n  </div>\n  {% endif %}\n\n  <script>(function (window) {var OFFSET=window.OFFSET||{};OFFSET.data=OFFSET.data||{};OFFSET.data.media=OFFSET.data.media||{};OFFSET.data.media[{{ media.id }}]={{ media.media|default({})|json|safe }};window.OFFSET = OFFSET;})(this);</script>\n</div>\n{% endfor %}\n\n<span class="recommended-categories visible-md-block visible-lg-block" data-recommended-categories-target></span>\n\n{% endspaceless %}\n',"partials/v2/recommended-categories.html":'{% import \'../../macros/v2/photo.html\' as Photo %}\n\n<h1>{% i18n RECOMMENDED_CATEGORIES %}Recommended categories for you{% endi18n %}</h1>\n\n{% for media in recommendedCategories %}\n<div class="result" data-media-id="{{ media._id }}">\n  <a class="result-pic" href="/search/{{media.category}}" title="{{media.description}}" data-track="click.mosaic.recommendedCategory">\n\n    <img src="{{ media.coverImage }}"\n      style="height: 179px; width: 239px;"\n      alt="{{media.description}}"/>\n\n    <div class="overlay">{{media.category}}</div>\n  </a>\n</div>\n{% endfor %}\n\n',"partials/v2/order/cart-item.html":'<li class="js-cart-item mbx js-item-details {% if item.status != \'active\' %}js-illegal-item{% endif %}"\n    data-dateadded="{{item.date}}"\n    data-photographer="{{item.photographer}}"\n    data-friendly-id="{{ item.friendly_id }}"\n    data-description="{{ item.description }}"\n    data-relative-url="{{ item.relative_url }}}"\n    data-media-id="{{ item.id }}"\n    data-status="{{item.status}}"\n    data-size="{{item.size}}"\n    data-small-fs="{{ item.display.file_size_MBs }}"\n    data-small-px="{{ item.display.pixels }}"\n    data-small-dpi="{{ item.display.dpi }}"\n    data-large-fs="{{ item.original.file_size_MBs }}"\n    data-large-px="{{ item.original.pixels }}"\n    data-large-dpi="{{ item.original.dpi }}"\n    data-editorial="{{ item.editorial }}"\n    id="cart_item{{ item.id }}"> <!-- cart_component.js needs this id to remove item -->\n  <div class="row">\n    <div class="col-xs-offset-1 col-xs-10 col-sm-4 ">\n      {% if item.status == \'active\' %}\n      <a href="{{ item.relative_url }}" title="{{ item.description }}" class="thumbnail thumbnail-center thumbnail-offset">\n        {% if user.isPremier %}\n          <img class="js-cart-thumb" src="{{ item.cart_thumb|replace(\'medium\', \'medium_premier\') }}">\n        {% else %}\n          <img class="js-cart-thumb" src="{{ item.cart_thumb }}">\n        {% endif %}\n      </a>\n      {% else %}\n      <a title="{{ item.description }}" class="thumbnail thumbnail-center thumbnail-offset thumbnail-removed text-small text-upper">\n        {% if user.isPremier %}\n          <img class="js-cart-thumb" src="{{ item.cart_thumb|replace(\'medium\', \'medium_premier\') }}">\n        {% else %}\n          <img class="js-cart-thumb" src="{{ item.cart_thumb }}">\n        {% endif %}\n      </a>\n      {% endif %}\n    </div>\n    <div class="col-xs-offset-1 col-xs-10 col-sm-offset-0 col-sm-7">\n      <h3 class="h6 man text-truncate">{{ item.description }}</h3>\n\n      {% if item.status == \'active\' %}\n      {% i18n ID_UCASE %}<span data-definition="as in identifier">ID</span>{% endi18n %}: <a href="{{ item.relative_url }}"> {{ item.friendly_id }} </a>\n      {% if item.editorial %}\n      <div class="js_editorial-note editorial-note text-small" title="{% i18n EDITORIAL_USE_CUSTOMER_MESSAGING %}Editorial Use Only. For promotional or other commercial usage, we may be able to assist. Please contact: editorialsales@shutterstock.com {% endi18n %}">\n        {% i18n EDITORIAL_USE_ONLY %}Editorial use only{% endi18n %} <i class="icon icon-question-sign"></i>\n      </div>\n      {% endif %}      \n      <div data-media-id="{{ item.id }}" class="mhn mtm mbs">\n        {% set largeDisabled = user.isPremierPrepaid && user.premierPrepaid.size == "SMALL" %}\n        {% set smallDisabled = user.isPremierPrepaid && user.premierPrepaid.size == "LARGE" %}\n        <label class="man{% if largeDisabled %} disabled{% endif %}">\n          {% if (item.size == "LARGE" && !largeDisabled) || smallDisabled %}\n            <input type="radio" class="js-change-size input-styled" name="size-{{item.id}}" value="LARGE" checked="checked"{% if largeDisabled %} disabled="disabled"{% endif %}>\n          {% else %}\n            <input type="radio" class="js-change-size input-styled" name="size-{{item.id}}" value="LARGE"{% if largeDisabled %} disabled="disabled"{% endif %}>\n          {% endif %}\n          <i class="radio-icon"></i>\n          <strong>{{ prices.large_image_price }}</strong> -\n          <span class="text-small text-lighter">{{ item.original.pixels }}, {{ item.original.dpi }}{% i18n DPI %}<span data-definition="dpi as in dots per inch">dpi</span>{% endi18n %}</span>\n        </label>\n        <br/>\n        <label class="man{% if smallDisabled %} disabled{% endif %}">\n          {% if (item.size == "SMALL" && !smallDisabled) || largeDisabled %}\n            <input type="radio" class="js-change-size input-styled" name="size-{{item.id}}" value="SMALL" checked="checked"{% if smallDisabled %} disabled="disabled"{% endif %}>\n          {% else %}\n            <input type="radio" class="js-change-size input-styled" name="size-{{item.id}}" value="SMALL"{% if smallDisabled %} disabled="disabled"{% endif %}>\n          {% endif %}\n          <i class="radio-icon"></i>\n          <strong>{{ prices.small_image_price }}</strong> -\n          <span class="text-small text-lighter">{{ item.display.pixels }}, {{ item.display.dpi }}{% i18n DPI %}<span data-definition="dpi as in dots per inch">dpi</span>{% endi18n %}</span>\n        </label>\n      </div>\n      {% else %}\n      <p class="text-small text-error">\n        {% i18n PLEASE_REMOVE_BEFORE_CHECKOUT %}Please remove this item before you check out{% endi18n %}\n      </p>\n      {% endif %}\n\n      {# cart_component.js watches .removeItems and grabs img id from this format of id #}\n      <a href="{{ item.id }}"\n        class="removeItems text-small"\n        id="remove{{ item.id }}"\n        data-track=\'click.orderEdit.removeItem.{"item.id":"{{item.id}}"}\'>{% i18n REMOVE %}Remove{% endi18n %}</a>\n      <span class="text-xs text-muted phm">|</span>\n      <a href="#"\n        class="js-save-for-later text-small"\n        data-id="{{ item.id }}"\n        data-track=\'click.orderEdit.saveForLater.{"item.id":"{{item.id}}"}\'>{% i18n SAVE_FOR_LATER %}Save for later{% endi18n %}</a>\n    </div>\n  </div>\n  {% if user.isPremierPrepaid %}\n    <input type="hidden" name="items[]" value="{{ item.id }}" />\n  {% endif %}\n</li>\n',"partials/v2/order/saved-item.html":'<div class="col-xs-12 col-sm-6 col-lg-4 mbl js-saved-item js-item-details"\n		data-dateadded="{{item.date}}"\n		data-photographer="{{item.photographer}}"\n		data-friendly-id="{{ item.friendly_id }}"\n		data-description="{{ item.description }}"\n		data-relative-url="{{ item.relative_url }}"\n		data-media-id="{{ item.id }}"\n		data-status="{{item.status}}"\n		data-size="{{item.size}}"\n		data-small-fs="{{ item.display.file_size_MBs }}"\n		data-small-px="{{ item.display.pixels }}"\n		data-small-dpi="{{ item.display.dpi }}"\n		data-large-fs="{{ item.original.file_size_MBs }}"\n		data-large-px="{{ item.original.pixels }}"\n		data-large-dpi="{{ item.original.dpi }}"\n		data-editorial="{{ item.editorial }}">\n	<a href="{{ item.relative_url }}" title="{{ item.description }}" class="thumbnail thumbnail-center thumbnail-offset">\n		<img class="js-cart-thumb" src="{{ item.cart_thumb }}">\n	</a>\n	<p class="mtm mbn">\n		{% i18n ID_UCASE %}<span data-definition="as in identifier">ID</span>{% endi18n %}: <a href="{{ item.relative_url }}">{{ item.friendly_id }}</a>\n	</p>\n	<p class="text-small">\n		<a href="#" class="js-move-to-cart">{% i18n MOVE_TO_CART %}Move to cart{% endi18n %}</a>\n		<span class="text-xs text-muted phm">|</span>\n		<a href="#" class="js-remove-from-saved">{% i18n REMOVE %}Remove{% endi18n %}</a>\n	</p>\n</div>\n',"partials/v2/search/inline-photo.html":'{% import \'../../../macros/v2/photo.html\' as Photo %}\n{% set origin = window.location.protocol + \'//\' + window.location.hostname %}\n<div class="row">\n  <div class="col-md-7 col-lg-8">\n    <div class="mod-asset mod-asset-image ui-dark">\n      {% if user.isPremier %}\n        {{ Photo.image(photo, photo.src|replace(\'medium\', \'medium_premier\'), true) }}\n      {% else %}\n        {{ Photo.image(photo, photo.src, true) }}\n      {% endif %}\n    </div>\n  </div>\n  <div class="col-md-5 col-lg-4">\n    {% if photo.offset_exclusive %}\n      {% include "../../../partials/v2/search/offset-exclusive-tag.html" with {tooltip: true, classes: "inverted"} %}\n    {% endif %}\n    <div class="mod-asset mod-asset-details ui-dark">\n      <div class="{% if photo.offset_exclusive %}mtx{% endif %}">\n        {{ Photo.title(photo, photo.descriptionTruncated) }}\n        {{ Photo.meta(photo, true) }}\n      </div>\n      <div class="asset-add-to-cart">\n        {% if !user.isLicensingDisabledFlag %}\n          {{ Photo.addToCart(photo, prices, license) }}\n        {% endif %}\n        {% if user.isPremier && !(user.browseOnly || user.purchaseOnly) %}\n          {{ Photo.downloadComp(photo) }}\n        {% endif %}\n        <div class="mtl text-center">\n          {{ Photo.addToSet(photo) }}\n          {{ Photo.share(photo.friendly_id) }}\n        </div>\n        {{ Photo.exclusiveModal(photo, photo.src, user) }}\n      </div>\n      <div class="asset-keywords pbn">\n        {% set visibleKeywordLimit = 10 %}\n        {% set viewAllLink = photo.relative_url + \'?expand=keywords\' %}\n        {{ Photo.keywords(photo.keywords, visibleKeywordLimit, viewAllLink) }}\n      </div>\n    </div>\n  </div>\n</div>\n\n{% if showDiscoveryPaths %}\n<div class="row inline-discovery-container">\n  <div class="col-md-12 inline-discovery-paths mbs mod-asset-related">\n    <ul class="list-inline mln">\n      {% if photo.same_shoot %}\n      <li class="js_discovery-link discovery-link text-small mbm prl" data-target="same-shoot">\n        {% i18n SAME_SHOOT %}<span data-definition="shoot as in photoshoot">Same shoot</span>{% endi18n %}\n      </li>\n      {% endif %}\n\n      {# Visually similar (below) is NOT the same thing as similar, despite them both having the same title. We prever visually similar to similar. #}\n      <li class="js_discovery-link discovery-link text-small mbm prl" data-target="visually-similar">\n        {% i18n SIMILAR_IMAGES %}Similar images{% endi18n %}\n      </li>\n\n      <li class="js_discovery-link discovery-link text-small mbm prl" data-target="similar">\n        {% i18n SIMILAR_IMAGES %}Similar images{% endi18n %}\n      </li>\n      <li class="js_discovery-link discovery-link text-small mbm prl" data-target="contributor">\n        {% set contributor = photo.agency || photo.photographer %}\n        {% i18n MORE_FROM_CONTRIBUTOR __contributor__:contributor %}More from __contributor__{% endi18n %}\n      </li>\n    </ul>\n    <div class="js_discovery-loading inline-discovery-loading mod-asset-related">\n    </div>\n    {{ Photo.discoveryPaths(photo, visualDiscovery.active) }}\n  </div>\n</div>\n{% endif %}\n',"partials/v2/contributor-faq.html":'<div class="ui-medium-light container-offset-overlay">\n  <section class="container container-offset">\n    <div class="row">\n      <h1 class="col-md-12 text-center">{% i18n FAQS %}FAQs{% endi18n %}</h1>\n    </div>\n    <div class="row">\n      <nav class="col-md-8 col-md-offset-2 mbx">\n        <ul class="list-unstyled">\n          <li><a href="#jump-become">{% i18n WHY_BECOME_AN_OFFSET_ARTIST %}Why become an Offset artist?{% endi18n %}</a></li>\n          <li><a href="#jump-looking">{% i18n WHAT_IS_OFFSET_LOOKING_FOR %}What is Offset looking for in my portfolio?{% endi18n %}</a></li>\n          <li><a href="#jump-generate">{% i18n HOW_DO_I_GENERATE_REVENUE %}How do I generate revenue?{% endi18n %}</a></li>\n          <li><a href="#jump-clients">{% i18n WHO_ARE_OFFSETS_CLIENTS %}Who are Offset\'s clients?{% endi18n %}</a></li>\n          <li><a href="#jump-market">{% i18n HOW_DOES_OFFSET_MARKET %}How does Offset market my work?{% endi18n %}</a></li>\n          <li><a href="#jump-copyright">{% i18n DO_I_MAINTAIN_COPYRIGHT %}Do I maintain my copyright if I work with Offset?{% endi18n %}</a></li>\n          <li><a href="#jump-release">{% i18n I_PHOTOGRAPH_PEOPLE %}I photograph people but don’t always have model releases, will Offset still accept these images?{% endi18n %}</a></li>\n        </ul>\n      </nav>\n      <dl class="col-md-8 col-md-offset-2">\n        <dt id="jump-become" class="jump-landing">{% i18n WHY_BECOME_AN_OFFSET_ARTIST %}Why become an Offset artist?{% endi18n %}</dt>\n        <dd>{% i18n WHY_BECOME_AN_OFFSET_ARTIST_ANS %}Offset will market your work to our clients around the world. As an Offset artist, you will have the opportunity to generate income from your existing archive and to let client requests inform and inspire your future work. We work with exceptional artists who are the best in their class in the fields of photography and illustration.{% endi18n %}</dd>\n\n        <dt id="jump-looking" class="jump-landing">{% i18n WHAT_IS_OFFSET_LOOKING_FOR %}What is Offset looking for in my portfolio?{% endi18n %}</dt>\n        <dd>{% i18n WHAT_IS_OFFSET_LOOKING_FOR_ANS %}Offset images are authentic, unique and highly produced. We are seeking storytelling images to help our clients tell their stories. Categories include lifestyle, food, wildlife, travel, fashion, beauty and many more.  Please submit images that best represent you and your work.{% endi18n %}</dd>\n\n        <dt id="jump-generate" class="jump-landing">{% i18n HOW_DO_I_GENERATE_REVENUE %}How do I generate revenue?{% endi18n %}</dt>\n        <dd>{% i18n HOW_DO_I_GENERATE_REVENUE_NEW_PRICE_ANS %}Offset’s pricing is simple, straightforward and transparent. Lo-res files (3mb) are licensed for $249 and hi-res files (50mb) for $349. Every time one of your images is downloaded, you generate revenue.{% endi18n %}</dd>\n\n        <dt id="jump-clients" class="jump-landing">{% i18n WHO_ARE_OFFSETS_CLIENTS %}Who are Offset\'s clients?{% endi18n %}</dt>\n        <dd>{% i18n WHO_ARE_OFFSETS_CLIENTS_ANS %}Our clients are the world’s top advertising agencies, publishing houses and branding agencies. They are storytellers who use Offset images in powerful and compelling ways.{% endi18n %}</dd>\n\n        <dt id="jump-market" class="jump-landing">{% i18n HOW_DOES_OFFSET_MARKET %}How does Offset market my work?{% endi18n %}</dt>\n        <dd>{% i18n HOW_DOES_OFFSET_MARKET_ANS %}Our team aims to introduce you and your work to our clients across the globe! We also highlight our artists across our social media channels. We feature new artists each month in a specific curated collection and also create dedicated emails informing clients of new work on Offset.{% endi18n %}</dd>\n\n        <dt id="jump-copyright" class="jump-landing">{% i18n DO_I_MAINTAIN_COPYRIGHT %}Do I maintain my copyright if I work with Offset?{% endi18n %}</dt>\n        <dd>{% i18n DO_I_MAINTAIN_COPYRIGHT_ANS %}Yes, you retain copyright ownership to all content you submit to Offset, and licensing your content through us will not transfer your rights. Offset simply gives customers certain usage rights to your content.{% endi18n %}</dd>\n\n        <dt id="jump-release" class="jump-landing">{% i18n I_PHOTOGRAPH_PEOPLE %}I photograph people but don’t always have model releases, will Offset still accept these images?{% endi18n %}</dt>\n        <dd>{% i18n I_PHOTOGRAPH_PEOPLE_ANS %}Images of identifiable people with model releases are licensed commercially. If your image is newsworthy or covers a specific cultural event and does not have a release, we may license the image for editorial use to newspapers and magazines. When possible, it is always best to get a model release! For a list of releases we accept, please see <a href="http://www.shutterstock.com/blog/acceptable-foreign-language-releases" title="List of acceptable releases">this list</a>. To download releases in multiple languages please visit our <a href="https://submit.shutterstock.com/legal/" title="Shutterstock\'s legal center">legal center{% endi18n %}</a>.</dd>\n      </dl>\n    </div>\n  </section>\n</div>\n',"order/edit.html":'{% extends \'../layout-v2.html\' %}\n{% import \'../macros/cart.html\' as cartmacros %}\n{% import \'../macros/upsell.html\' as Upsell %}\n{% import \'../macros/order.html\' as orderMacros %}\n{% import \'../macros/v2/prepaid.html\' as Prepaid %}\n\n{% block head %}\n  {% parent %}\n  {% if env_name === "development" %}\n    <link rel="stylesheet" href="{{ \'/stylesheets/app/cart.css\'|cdnifyAssets }}" type="text/css" media="all" />\n  {% else %}\n    <link rel="stylesheet" href="{{ \'/stylesheets/app/cart.css\'|cdnifyAssets }}" type="text/css" media="all" />\n  {% endif %}\n{% endblock %}\n\n\n{% block content %}\n{% set canCheckout = true %}\n\n{% if user_access == "compOnly" || user_access == "browseOnly" %}\n  {% set canCheckout = false %}\n{% endif %}\n\n<div class="row">\n  <div class="col-md-7 col-lg-8">\n    <h1 class="mtn">{% i18n MY_CART %}My cart{% endi18n %}</h1>\n  </div>\n  {% if cart.cart.length && !is_premier %}\n    {{ cartmacros.subnav("edit", promotions, packs) }}\n  {% endif %}\n</div>\n\n<div class="ui-medium-light container-equal-col-wrap container-page-height">\n  <form action="{% if user.isPremierPrepaid %}/order/prepaid{% elseif is_premier %}/licenses{% else %}/order/edit{% endif %}"\n    method="POST"\n    class="js-cart-edit-form"\n    data-premier="{{ is_premier }}"\n    data-haspromo="{{ promotions && promotions.length > 0}}"\n    data-haspacks="{{ packs.length }}"\n    {% if premierPaymentMethod %}\n    data-premier-payment-method="{{ premierPaymentMethod }}"\n    {% endif %}\n    {% if user.isPremierPrepaid %}\n    data-track="submit.orderEdit.premierPrepaid"\n    {% elseif is_premier%}\n    data-track="submit.orderEdit.premierLicense"\n    {% else %}\n    data-track="submit.orderEdit.webUser"\n    {% endif %}\n    >\n\n    <div class="row">\n      <div class="col-md-7 col-lg-8 pvx">\n        {% if (promotions && promotions.length) || promotion %}\n        <input type="hidden" value="/order/promotions" name="next"/>\n        {% elseif packs && packs.length %}\n        <input type="hidden" value="/order/packs" name="next"/>\n        {% else %}\n        <input type="hidden" value="/order/billing" name="next"/>\n        {% endif %}\n\n        <div class="row">\n          <div class="col-xs-10 col-xs-offset-1">\n            <div class="js-error unstyled text-error{% if billingError %} ptl pbs{% endif %}">\n              {% if billingError %}\n                {% if billingError.isActiveScheduleCheck %}\n                  {% i18n LICENSING_ERROR_EXPIRED_SUBSCRIPTION %}Your account does not have an active subscription.{% endi18n %}\n                {% else %}\n                  {{ billingError.message || billingError |replace(\'\\n\', \'<br/>\')|safe }}\n                {% endif %}\n                {{ orderMacros.contactSalesRep(user.isPremier, salesRep) }}\n              {% endif %}\n            </div>\n          </div>\n        </div>\n\n        <div class="row">\n          <div class="col-xs-10 col-xs-offset-1">\n            <h2 class="h6"> {% i18n CART_DETAILS %}Cart details{% endi18n %} {% if !is_premier %}<span class="text-small text-uppercase">{% i18n OPTIONAL_PARENS %}(optional){% endi18n %}</span>{% endif %}</h2>\n          </div>\n        </div>\n\n        <div class="row">\n          {% for field in metadataFields %}\n          <div class="form-group col-xs-10 col-xs-offset-1 col-sm-5{% if loop.index0 % 2 == 0 %} col-sm-offset-1 {% else %} col-sm-offset-0 {% endif %}">\n            <input type="text"\n                   class="form-control"\n                name="metadata[{{ field.offset_api_field }}]"\n                value="{{ orderMetadata[field.offset_api_field]|default(\'\') }}"\n                placeholder=\'{{ field.name | dynamicTranslate(user.locale.current, "METADATA_FIELD") }}{% if field.is_required == 1 %} (required) {% endif %}\'\n                {% if field.is_required == 1 %} required {% endif %} />\n          </div>\n          {% endfor %}\n        </div>\n\n        {% if user.isPremierPrepaid && user.premierPrepaid.remaining > 0 %}\n        <div class="row js_premier-no-downloads hide">\n          <div class="col-xs-offset-1 col-xs-10 col-sm-10 text-error mtx mbl">\n            {% i18n PREPAID_NO_DOWNLOAD_SALES_REP __sales_rep_name__:salesRep.name, __sales_rep_email__:salesRep.email, __sales_rep_phone__:salesRep.phone %}You do not have enough prepaid image downloads remaining for this purchase. To continue, please remove excess image(s) from your cart or please contact your sales representative __sales_rep_name__ at <a href="mailto:__sales_rep_email__">__sales_rep_email__</a> or __sales_rep_phone__.{% endi18n %}\n          </div>\n        </div>\n\n        <div class="row js_premier-size-change hide">\n          <div class="col-xs-offset-1 col-xs-10 col-sm-10 mtx mbl">\n            {% i18n PREPAID_SIZE_CHANGE %}<b>NOTE:</b> The size of one or more images has been changed to be compatible with your prepaid image plan.{% endi18n %}\n          </div>\n        </div>\n        {% endif %}\n\n        <ul class="list-unstyled ptx js-cart-items">\n          {% for item in cart.cart %}\n            {% include "../partials/v2/order/cart-item.html" %}\n          {% endfor %}\n        </ul>\n\n        <div class="js-empty-cart-error row {% if cart.cart.length %}hide{% endif %}">\n          <div class="col-xs-12 ptx text-center h4 text-muted">\n            {% i18n YOUR_CART_IS_EMPTY %}Your cart is empty{% endi18n %}\n          </div>\n        </div>\n\n        {% set hasSflItems = savedForLater && savedForLater.cart && savedForLater.cart.length %}\n        <div class="{% if !hasSflItems %}hide{% endif %} js-saved-wrap">\n          <div class="row ptx pbm">\n            <div class="col-xs-offset-1 col-xs-10 divided"></div>\n          </div>\n          <div class="row">\n            <h2 class="h5 col-xs-offset-1 col-xs-10">{% i18n SAVED_ITEMS %}<span data-definition="as in saved cart items">Saved items</span>{% endi18n %}</h2>\n          </div>\n          <div class="row">\n            <div class="col-xs-10 col-xs-offset-1">\n              <div class="row js-saved-items">\n                {% if hasSflItems %}\n                  {% for item in savedForLater.cart %}\n                    {% include "../partials/v2/order/saved-item.html" %}\n                  {% endfor %}\n                {% endif %}\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n\n      <!-- SIDEBAR -->\n      <div class="col-xs-12 col-md-5 col-lg-4 ui-light container-equal-col">\n\n        <div class="ptx md-phx mbm">\n          <div class="row">\n            <h2 class="col-xs-10 col-xs-offset-1 col-md-12 col-md-offset-0 h4 mts">{% i18n ORDER_SUMMARY %}Order summary{% endi18n %}</h2>\n          </div>\n\n          {% if user.isPremierPrepaid && canCheckout %}\n          <div class="row">\n            <div class="col-xs-10 col-xs-offset-1 col-md-12 col-md-offset-0 ui-medium-light mbl pal">\n              {% if user.premierPrepaid.expiryDate %}\n                {% i18n PREPAID_EXPIRED_ON_DATE __date__:user.premierPrepaid.expiryDate %}<b id="credits-remaining">Your prepaid pack expired on __date__.</b> For further assistance, please contact your sales rep.{% endi18n %}\n              {% else %}\n                {{ Prepaid.downloadsRemaining(user.premierPrepaid.remaining, user.premierPrepaid.total, true, false) }}\n                {% if user.premierPrepaid.remaining === 0 %}\n                  {% i18n PREPAID_CONTACT_SALES_REP __sales_rep_name__:salesRep.name, __sales_rep_email__:salesRep.email, __sales_rep_phone__:salesRep.phone %}<b id="credits-remaining">Please contact your sales representative __sales_rep_name__ at <a href="mailto:__sales_rep_email__">__sales_rep_email__</a> or __sales_rep_phone__.</b>{% endi18n %}\n                {% endif %}\n              {% endif %}\n            </div>\n          </div>\n          {% endif %}\n\n          <ul class="list-unstyled mtm">\n            <li class="h3 man">\n              <div class="row">\n                <div class="col-xs-10 col-xs-offset-1 col-md-12 col-md-offset-0 total-container">\n                  <span class="h6 text-lighter" id="cart_length"></span>\n                  <span class="js-cart-total h3 man pull-right text-strong" id="cart_total"></span>\n                </div>\n              </div>\n            </li>\n          </ul>\n\n      </div>\n\n        {% if !user.isPremierPrepaid || (user.isPremierPrepaid && user.premierPrepaid.remaining > 0) %}\n          <div class="row">\n            <div class="col-xs-10 col-xs-offset-1 col-md-12 col-md-offset-0">\n              <div class="js_editorial-confirmation editorial-confirmation phx mbx hide">\n                <div class="editorial-confirmation-error text-error text-small">\n                  {% i18n AGREE_LICENSING_EDITORIAL %}You must agree to the licensing terms for editorial images.{% endi18n %}\n                </div>\n                <label class="checkbox text-small pln ptn">\n                  <input type="checkbox" class="js_editorial-confirmation-check input-styled" name="editorial-confirmation">\n                  <i class="checkbox-icon"></i> <strong>{% i18n EDITORIAL_IMAGES %}Editorial images{% endi18n %}</strong>\n                </label>\n                <div class="text-small">\n                  {% i18n EDITORIAL_CHECK_AGREE %}You have one or more editorial images in your cart. By checking this checkbox you confirm that you have read the <a href="/licensing-terms" target="_blank">licensing terms</a> and understand the limitations of usage for editorial images.{% endi18n %}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {% if user.isPremier %}\n          <!-- Tax notice -->\n          <div class="md-phx mbm">\n\n            <div class="row">\n              <div class="col-xs-10 col-xs-offset-1 col-md-12 col-md-offset-0 pal premier-tax-notice">\n                    {% i18n NOTE_INVOICE_MAYBE_TAXABLE %} Please note that final invoices may be subject to tax.{% endi18n %}\n              </div>\n            </div>\n          </div>\n          <!-- end of Tax notice -->\n          {% endif %}\n\n          <div class="row">\n            <div class="col-xs-10 col-xs-offset-1 col-md-12 col-md-offset-0">\n              <div class="md-phx">\n\n                {% if (cart.cart.length > 0 || savedForLater.cart.length > 0) && canCheckout %}\n                {% if cart.cart.length == 0 || imageSizesNotAllowed %}\n                <button disabled type="submit"\n                  class="btn btn-primary btn-large col-xs-12 pan mtm mbl js-edit-submit"\n                  data-track="click.orderEditForm.submitButtonDisabled">\n                {% else %}\n                <button type="submit"\n                  class="btn btn-primary btn-large col-xs-12 pan mtm mbl js-edit-submit"\n                  {% if user.isPremierPrepaid %}\n                  data-track="click.orderEdit.premierPrepaid"\n                  {% elseif is_premier%}\n                  data-track="click.orderEdit.premierLicense"\n                  {% else %}\n                  data-track="click.orderEdit.webUser"\n                  {% endif %}\n                >\n                {% endif %}\n\n                {% if user.isPremierPrepaid %}\n                  {% i18n LICENSE_USING_PREPAID %}License images using prepaid{% endi18n %}\n                {% elseif user.isPremier %}\n                  {% i18n LICENSE %}License{% endi18n %}\n                {% else %}\n                  {% i18n BEGIN_CHECKOUT %}Begin checkout{% endi18n %}\n                {% endif %}\n                </button>\n\n                {% if user.isPremierPrepaidLegacy %}\n                  <p class="js_premier-payment-method-warning ptl text-small text-lighter">\n                    {% if premierPaymentMethod === \'prepaid_small\' %}\n                      {% i18n NOTE_ACCOUNT_LICENSE_SMALL %}Note: this account can only license small images.{% endi18n %}\n                    {% elseif premierPaymentMethod === \'prepaid_large\' %}\n                      {% i18n NOTE_ACCOUNT_LICENSE_LARGE %}Note: this account can only license large images.{% endi18n %}\n                    {% endif %}\n                  </p>\n                {% endif %}\n\n                {% elseif !canCheckout %}\n                  {{ orderMacros.cannotPurchase(user, salesRep) }}\n                {% endif %}\n              </div>\n            </div>\n          </div>\n        {% elseif user.isPremierPrepaid && !canCheckout %}\n          <div class="row">\n            <div class="col-xs-10 col-xs-offset-1 col-md-12 col-md-offset-0">\n              <div class="md-phx">\n                {{ orderMacros.cannotPurchase(user, salesRep) }}\n              </div>\n            </div>\n          </div>\n        {% endif %}\n\n        <div class="pax text-center">\n          <a href="/pricing" class="js-upsell-backupmsg hide" data-track="click.orderEditForm.packUpsell">\n            {% i18n SAVE_WITH_IMAGE_PACK %}Save with an image pack{% endi18n %}\n          </a>\n        </div>\n\n      </div>\n      <!-- / SIDEBAR -->\n\n    </div>\n\n  </form>\n</div>\n{{ cartmacros.lockedCartModal(transaction_in_progress) }}\n{{ cartmacros.savedLimitModal() }}\n{% endblock %}\n\n{% block client_scripts %}\n  <script src="{{ \'/javascripts/v2/app/order.js\'|cdnifyAssets }}"></script>\n\n  {% if env_name === "development" %}\n    <script src="{{ \'/javascripts/v2/app/save-for-later.js\'|cdnifyAssets }}"></script>\n  {% else %}\n    <script src="{{ \'/javascripts/v2/build/app/save-for-later.min.js\' | cdnifyAssets }}"></script>\n  {% endif %}\n\n  {% if user.isPremier %}\n  <script type="text/javascript"\n    src="{{ \'/javascripts/v2/build/app/analytics_sstk_core_kpi.min.js\' | cdnifyAssets }}"\n    id="sstkCoreKPI"\n    data-ado="{{analyticsTrackingData}}"\n    data-retry=5></script>\n  {% endif %}\n\n{% endblock %}\n',
"partials/sdp-analytics-script.html":"{# initializeSegment Analytics #}\n<script type=\"text/javascript\">\n  (function initializeSegment(window) {\n    var OFFSET = window.OFFSET || {};\n    var util = OFFSET.util || {};\n\n    var dataObject = _.clone(util.analyticsDataObject);\n\n    {% if trackingData %}\n    var user = {{ trackingData|json|safe }};\n    user = user.user;\n    var created = new Date(user.created);\n    \n    // using cookies for QA and Prod BUT Dev doesnt have cookies so we use a fallback.\n    dataObject.visit.visitId = $.cookie('visit_id') || util.visit.visitId;\n    dataObject.visit.visitorId = $.cookie('visitor_id') || util.visit.visitorId;\n    dataObject.visit.geoLocationCountryCode = user.country;\n\n    var nonTrackingUser = OFFSET.user || {};\n\n    {% if user.authenticated %}\n    var status = user.totalLicenseCount > 0 ? 'customer' : 'user';\n    var isActive = !nonTrackingUser.isPremier || !(nonTrackingUser.isPremierBrowseOnly || nonTrackingUser.isPremierCompOnly);\n    dataObject[\"user\"] = {\n      'id': user.id.toString(),\n      'creationDate': created,\n      'isActive': isActive.toString(),\n      'status': status\n    };\n\n    // create new ecommerce object\n    var ec = {\n      currencyCode: user.currency\n    };\n    dataObject[\"ecommerce\"] = ec;\n\n    {% else %}\n\n    {# use a guest user if not authenticated #}\n    dataObject[\"user\"] = {\n      'id': '',\n      'creationDate': '',\n      'isActive': 'false',\n      'status': 'guest'\n    };\n    {% endif %}   {# authenticated #}\n    {% endif %}   {# TrackingData #}\n\n    window.analytics.load({\n      integrations: {\n        \"Google Tag Manager\" : {\n          \"containerId\" : \"GTM-PFWDHP\"\n        },\n        'Shutterstock Data Platform': {\n          tagCollectorUrl: util.sdpTagCollectorUrl\n        }\n      },\n      options: {\n        initialPageview: {\n          properties: dataObject\n        }\n      },\n      url : \"/javascripts/analytics/analytics.js\"\n    });\n\n    // initialize the analytics listener for the data-tracks events\n    window.AnalyticsListener.listen(function getCustomData() {\n      return {\n        userName: user ? user.userName : 'Guest'\n      };\n    });\n\n    // SSTK Core KPI accountCreationSuccess event\n    // only start the accountCreationSuccess GA track if the sessionStorage has a newRegistration\n    // newRegistration key set via click on the submit button on the registration form partial\n    if(window.sessionStorage.getItem('newRegistration')) {\n      // to avoid making another tracking call we need to remove the sessionStorage prop\n      window.sessionStorage.removeItem('newRegistration');\n      var ic = 0;\n      var interval = setInterval(checkForDataLayer, 300);\n\n      function checkForDataLayer() {\n        if (window.dataLayer && window.dataLayer[0] && window.dataLayer[0].user) {\n          clearInterval(interval);\n\n          if (window.dataLayer[0].user.id && window.dataLayer[0].user.creationDate) {\n            // check to see if the user was created within last 60 seconds and if the newRegistration storage prop is present\n            if (Date.now() - window.dataLayer[0].user.creationDate.getTime() <= 60000) {\n              window.analytics.track('accountCreationSuccess', window.dataLayer[0]);\n            }\n          }\n        } else {\n          // retry maximum 5 times\n          if (ic >= 5) {\n            clearInterval(interval);\n          } else {\n            ic += 1;\n          }\n        }\n      };      \n    }\n  }(this));\n</script>","partials/v2/cookie-consent-script.html":"<script>\n$(function(){\n  $(document).ready(function() {\n\n    const consentLibrary = new ConsentLibrary({\n      id: '{{ cookieConsentID |safe }}',\n      onConsentChanged: function () {\n        window.location.reload();\n      },\n    });\n\n    consentLibrary.load();\n  });\n});\n</script> \n"}||{},{prependLinksWithLanguage:function(a,b){var c=b&&b.user&&b.user.locale&&b.user.locale.requested||"en";return"en"===c?a:a.replace(new RegExp('(<a[^<>]*)(href="/(?!'+c+'[/?"]))',"g"),function(a,b,d){return b+'href="/'+c+"/"}).replace(new RegExp('(<form[^<>]*)(action="/(?!'+c+'[/?"]))',"g"),function(a,b,d){return b+'action="/'+c+"/"})}}||{}),function(root){var i18n=function(swig){function isDefined(a,b){var c=b.split("."),d=a+c[0],e="";return e="(typeof "+d+' !== "undefined"',_.each(c,function(a,b){0!==b&&(e+=" && "+d+"."+a+" !== undefined",d+="."+a)}),e+=")"}function setTranslations(a){translations="function"==typeof a?a():a}var translations={},exports={},global_config={imperial_language:0,debug:0,analyze:0,autoescape:null,active_languages:null},compiledData={};return exports.compiledData=function(){return compiledData},exports.clearCompiledData=function(){compiledData={}},exports.setTranslations=setTranslations,exports.init=function(translation_thing,config,next){function translate(a,b,c){return config.imperial_language&&config.imperial_language===b&&c||config.active_languages&&!_.contains(config.active_languages,b)&&c?c:translations&&a&&b&&translations[a]&&translations[a][b]?translations[a][b]:c}config=_.extend(global_config,config),setTranslations(translation_thing),swig.setExtension("i18n",function(a,b,c){var d=a.i18n?a.i18n.language:"unknown";return translate(b,d,c)}),swig.setFilter("i18n",function(a,b,c,d){var e=translate(a,b,c);return _.each(d,function(a,b){e=e.replace(new RegExp(b,"g"),a)}),e}),swig.setTag("i18n",function(a,b,c,d){var e=!0,f=!0,g=!1,h="";return c.on(d.VAR,function(a){var b=a?a.match:"";return e?(this.out.push(b),b=h?'"'+h+b+'"':"("+isDefined("_ctx.",b)+" ? _ctx."+b+" : "+isDefined("",b)+" ? "+b+' : "'+b+'")',this.out.pop(),this.out.push(b),e=!1):(g||(g=!0),h+=b),!1}),c.on(d.STRING,function(a){return h?(h+=a.match,!1):(f=!1,!0)}),c.on(d.NUMBER,function(a){return h||e?(h+=a.match,!1):(f=!1,!0)}),c.on(d.COLON,function(){return g&&this.out.push("("+isDefined("_ctx.",h)+" ? _ctx."+h+" : "+isDefined("",h)+" ? "+h+' : "'+h+'")'),h="",f=!0,!1}),c.on(d.BRACKETOPEN,function(a){return h+=a.match,!1}),c.on(d.BRACKETCLOSE,function(a){return h+=a.match,!1}),c.on(d.COMMA,function(){return g&&f&&this.out.push("("+isDefined("_ctx.",h)+" ? _ctx."+h+" : "+isDefined("",h)+" ? "+h+' : "")'),f=!0,h="",!1}),c.on(d.DOTKEY,function(a){return h?(h+="."+a.match,!1):!0}),c.on("end",function(){g&&f&&(this.out.push("("+isDefined("_ctx.",h)+" ? _ctx."+h+" : "+isDefined("",h)+" ? "+h+' : "")'),h="")}),c.on(d.WHITESPACE,function(){return!1}),!0},function(compiler,args,content,parents,options,blockName){var tag=args.shift()||void 0;content=compiler(content,parents,options,blockName),config.analyze&&(compiledData[eval("_ctx = {};"+tag)]=eval("var _output = '';"+content));for(var output='_output += (function() { var _output = "";\nvar tag = '+tag+";"+content+"var translate_result = _ext.i18n(_ctx, tag, _output);\n";args.length;){for(var searchFor=args.shift()||void 0,replaceWith=args.shift()||void 0;args.length&&!args[0].match(/typeof/);)replaceWith+=args.shift();output+="var searchFor = "+searchFor+";\n",output+="var replaceWith = ",output+="string"==typeof config.autoescape?'_filters["escape"]('+replaceWith+',"'+config.autoescape+'");\n':replaceWith+";\n",output+='translate_result = translate_result.replace(RegExp(searchFor, "g")',output+=",(replaceWith));\n"}return output+="return translate_result;})();",config.debug>0&&console.log(output),output},!0,!0),next&&next()},exports},OFFSET=root.OFFSET||{};OFFSET.tmpl=OFFSET.tmpl||{},OFFSET.tmpl.i18n=i18n,root.OFFSET=OFFSET}(this);